/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { Transition, TransitionController, TransitionDirection } from '../../../modules/transition/internal';
import { MessageConfig } from '../classes/message-config';
/**
 * @record
 */
export function IMessage() { }
if (false) {
    /**
     * @return {?}
     */
    IMessage.prototype.dismiss = function () { };
}
var FuiMessage = /** @class */ (function () {
    function FuiMessage() {
        /** @type {?} */
        var config = new MessageConfig('');
        this.loadConfig(config);
        this.isDynamic = false;
        this.transitionOutDuration = 300;
        this.timeoutProgress = 100;
        this.transitionController = new TransitionController(false);
        this.show();
    }
    Object.defineProperty(FuiMessage.prototype, "dynamicClasses", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var classes = {};
            classes[this.state] = true;
            if (this.isDynamic && this.hasProgress) {
                classes.attached = true;
            }
            (this.classes || '')
                .split(' ')
                .forEach((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return classes[c] = true; }));
            return classes;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} config
     * @return {?}
     */
    FuiMessage.prototype.loadConfig = /**
     * @param {?} config
     * @return {?}
     */
    function (config) {
        this.isDynamic = true;
        this.text = config.text;
        this.header = config.header;
        this.state = config.state;
        this.timeout = config.timeout;
        this.extendedTimeout = config.extendedTimeout;
        this.hasDismissButton = config.hasDismissButton;
        this.hasProgress = config.hasProgress;
        this.transition = config.transition;
        this.transitionInDuration = config.transitionInDuration;
        this.transitionOutDuration = config.transitionOutDuration;
        this.onClick = config.onClick;
        this.onDismiss = config.onDismiss;
    };
    /**
     * @return {?}
     */
    FuiMessage.prototype.show = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.transitionController.stopAll();
        this.transitionController.animate(new Transition(this.transition, this.isDynamic ? this.transitionInDuration : 0, TransitionDirection.In, (/**
         * @return {?}
         */
        function () {
            if (_this.isDynamic) {
                _this.beginTimer(_this.timeout);
            }
        })));
    };
    /**
     * @return {?}
     */
    FuiMessage.prototype.dismiss = /**
     * @return {?}
     */
    function () {
        this.isDismissing = true;
        this.transitionOutDuration = this.transitionInDuration;
        this.hide();
    };
    /**
     * @return {?}
     */
    FuiMessage.prototype.hide = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.isClosing = true;
        this.transitionController.stopAll();
        this.transitionController.animate(new Transition(this.transition, this.transitionOutDuration, TransitionDirection.Out, (/**
         * @return {?}
         */
        function () {
            _this.isClosing = false;
            _this.onDismiss.emit();
        })));
    };
    /**
     * @param {?} timeout
     * @return {?}
     */
    FuiMessage.prototype.beginTimer = /**
     * @param {?} timeout
     * @return {?}
     */
    function (timeout) {
        var _this = this;
        if (this.isDynamic && !this.isDismissing) {
            this.timeoutProgress = 0;
            this.currentTimeout = timeout;
            this._displayTimeout = window.setTimeout((/**
             * @return {?}
             */
            function () { return _this.onTimedOut(); }), timeout);
        }
    };
    /**
     * @return {?}
     */
    FuiMessage.prototype.cancelTimer = /**
     * @return {?}
     */
    function () {
        if (this.isDynamic && !this.isDismissing) {
            this.timeoutProgress = 100;
            this.currentTimeout = 0;
            clearTimeout(this._displayTimeout);
            if (this.isClosing) {
                this.isClosing = false;
                this.transitionController.cancel();
            }
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    FuiMessage.prototype.onClicked = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (!e.eventHandled) {
            this.cancelTimer();
            this.onClick.emit();
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    FuiMessage.prototype.onDismissClicked = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        e.eventHandled = true;
        this.dismiss();
    };
    /**
     * @private
     * @return {?}
     */
    FuiMessage.prototype.onTimedOut = /**
     * @private
     * @return {?}
     */
    function () {
        this.hide();
    };
    FuiMessage.decorators = [
        { type: Component, args: [{
                    selector: 'fui-message',
                    template: "\n<div [fuiTransition]=\"transitionController\">\n    <div class=\"ui message\"\n         [ngClass]=\"dynamicClasses\"\n         (mousemove)=\"cancelTimer()\"\n         (mouseleave)=\"beginTimer(extendedTimeout)\"\n         (click)=\"onClicked($event)\">\n        <i class=\"close icon\" *ngIf=\"hasDismissButton\" (click)=\"onDismissClicked($event)\"></i>\n        <ng-content></ng-content>\n        <ng-container *ngIf=\"isDynamic\">\n            <div class=\"header\" *ngIf=\"header\">{{ header }}</div>\n            <p>{{ text }}</p>\n        </ng-container>\n    </div>\n    <fui-progress *ngIf=\"isDynamic && hasProgress\"\n                  class=\"bottom attached\"\n                  [value]=\"timeoutProgress\"\n                  [autoSuccess]=\"false\"\n                  transition=\"linear\"\n                  [transitionDuration]=\"currentTimeout\"\n                  [canCompletelyEmpty]=\"true\"></fui-progress>\n</div>\n"
                }] }
    ];
    /** @nocollapse */
    FuiMessage.ctorParameters = function () { return []; };
    FuiMessage.propDecorators = {
        hasDismissButton: [{ type: Input }],
        transition: [{ type: Input }],
        transitionOutDuration: [{ type: Input, args: ['transitionDuration',] }],
        onClick: [{ type: Output, args: ['click',] }],
        onDismiss: [{ type: Output, args: ['dismiss',] }],
        classes: [{ type: Input, args: ['class',] }]
    };
    return FuiMessage;
}());
export { FuiMessage };
if (false) {
    /** @type {?} */
    FuiMessage.prototype.isDynamic;
    /** @type {?} */
    FuiMessage.prototype.isClosing;
    /** @type {?} */
    FuiMessage.prototype.isDismissing;
    /** @type {?} */
    FuiMessage.prototype.text;
    /** @type {?} */
    FuiMessage.prototype.header;
    /** @type {?} */
    FuiMessage.prototype.state;
    /** @type {?} */
    FuiMessage.prototype.timeout;
    /** @type {?} */
    FuiMessage.prototype.extendedTimeout;
    /** @type {?} */
    FuiMessage.prototype.currentTimeout;
    /** @type {?} */
    FuiMessage.prototype.hasDismissButton;
    /** @type {?} */
    FuiMessage.prototype.hasProgress;
    /** @type {?} */
    FuiMessage.prototype.timeoutProgress;
    /** @type {?} */
    FuiMessage.prototype.transitionController;
    /** @type {?} */
    FuiMessage.prototype.transition;
    /** @type {?} */
    FuiMessage.prototype.transitionInDuration;
    /** @type {?} */
    FuiMessage.prototype.transitionOutDuration;
    /** @type {?} */
    FuiMessage.prototype.onClick;
    /** @type {?} */
    FuiMessage.prototype.onDismiss;
    /** @type {?} */
    FuiMessage.prototype.classes;
    /**
     * @type {?}
     * @private
     */
    FuiMessage.prototype._displayTimeout;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1mb21hbnRpYy11aS8iLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL21lc3NhZ2UvY29tcG9uZW50cy9tZXNzYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3JFLE9BQU8sRUFBQyxVQUFVLEVBQUUsb0JBQW9CLEVBQUUsbUJBQW1CLEVBQUMsTUFBTSxzQ0FBc0MsQ0FBQztBQUUzRyxPQUFPLEVBQUMsYUFBYSxFQUFlLE1BQU0sMkJBQTJCLENBQUM7Ozs7QUFFdEUsOEJBRUM7Ozs7O0lBREMsNkNBQWdCOztBQUdsQjtJQThERTs7WUFDUSxNQUFNLEdBQUcsSUFBSSxhQUFhLENBQUMsRUFBRSxDQUFDO1FBQ3BDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFeEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7UUFDdkIsSUFBSSxDQUFDLHFCQUFxQixHQUFHLEdBQUcsQ0FBQztRQUNqQyxJQUFJLENBQUMsZUFBZSxHQUFHLEdBQUcsQ0FBQztRQUUzQixJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUU1RCxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDZCxDQUFDO0lBRUQsc0JBQVcsc0NBQWM7Ozs7UUFBekI7O2dCQUNRLE9BQU8sR0FBb0IsRUFBRTtZQUNuQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQztZQUUzQixJQUFJLElBQUksQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtnQkFDdEMsT0FBTyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7YUFDekI7WUFFRCxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksRUFBRSxD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OzttQ0FjRSxLQUFLOzZCQVNMLEtBQUs7d0NBSUwsS0FBSyxTQUFDLG9CQUFvQjswQkFFMUIsTUFBTSxTQUFDLE9BQU87NEJBRWQsTUFBTSxTQUFDLFNBQVM7MEJBRWhCLEtBQUssU0FBQyxPQUFPOztJQThIaEIsaUJBQUM7Q0FBQSxBQXhMRCxJQXdMQztTQTlKWSxVQUFVOzs7SUFDckIsK0JBQTBCOztJQUMxQiwrQkFBMEI7O0lBQzFCLGtDQUE2Qjs7SUFFN0IsMEJBQW9COztJQUNwQiw0QkFBdUI7O0lBQ3ZCLDJCQUEyQjs7SUFFM0IsNkJBQXVCOztJQUN2QixxQ0FBK0I7O0lBQy9CLG9DQUE4Qjs7SUFFOUIsc0NBQ2lDOztJQUVqQyxpQ0FBNEI7O0lBRTVCLHFDQUErQjs7SUFFL0IsMENBQWtEOztJQUVsRCxnQ0FDMEI7O0lBQzFCLDBDQUFvQzs7SUFFcEMsMkNBQ3FDOztJQUNyQyw2QkFDbUM7O0lBQ25DLCtCQUNxQzs7SUFDckMsNkJBQ3VCOzs7OztJQUN2QixxQ0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtUcmFuc2l0aW9uLCBUcmFuc2l0aW9uQ29udHJvbGxlciwgVHJhbnNpdGlvbkRpcmVjdGlvbn0gZnJvbSAnLi4vLi4vLi4vbW9kdWxlcy90cmFuc2l0aW9uL2ludGVybmFsJztcclxuaW1wb3J0IHtIYW5kbGVkRXZlbnQsIElEeW5hbWljQ2xhc3Nlc30gZnJvbSAnLi4vLi4vLi4vbWlzYy91dGlsL2ludGVybmFsJztcclxuaW1wb3J0IHtNZXNzYWdlQ29uZmlnLCBNZXNzYWdlU3RhdGV9IGZyb20gJy4uL2NsYXNzZXMvbWVzc2FnZS1jb25maWcnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTWVzc2FnZSB7XHJcbiAgZGlzbWlzcygpOiB2b2lkO1xyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2Z1aS1tZXNzYWdlJyxcclxuICB0ZW1wbGF0ZTogYFxyXG48ZGl2IFtmdWlUcmFuc2l0aW9uXT1cInRyYW5zaXRpb25Db250cm9sbGVyXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwidWkgbWVzc2FnZVwiXHJcbiAgICAgICAgIFtuZ0NsYXNzXT1cImR5bmFtaWNDbGFzc2VzXCJcclxuICAgICAgICAgKG1vdXNlbW92ZSk9XCJjYW5jZWxUaW1lcigpXCJcclxuICAgICAgICAgKG1vdXNlbGVhdmUpPVwiYmVnaW5UaW1lcihleHRlbmRlZFRpbWVvdXQpXCJcclxuICAgICAgICAgKGNsaWNrKT1cIm9uQ2xpY2tlZCgkZXZlbnQpXCI+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJjbG9zZSBpY29uXCIgKm5nSWY9XCJoYXNEaXNtaXNzQnV0dG9uXCIgKGNsaWNrKT1cIm9uRGlzbWlzc0NsaWNrZWQoJGV2ZW50KVwiPjwvaT5cclxuICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XHJcbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImlzRHluYW1pY1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCIgKm5nSWY9XCJoZWFkZXJcIj57eyBoZWFkZXIgfX08L2Rpdj5cclxuICAgICAgICAgICAgPHA+e3sgdGV4dCB9fTwvcD5cclxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGZ1aS1wcm9ncmVzcyAqbmdJZj1cImlzRHluYW1pYyAmJiBoYXNQcm9ncmVzc1wiXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYm90dG9tIGF0dGFjaGVkXCJcclxuICAgICAgICAgICAgICAgICAgW3ZhbHVlXT1cInRpbWVvdXRQcm9ncmVzc1wiXHJcbiAgICAgICAgICAgICAgICAgIFthdXRvU3VjY2Vzc109XCJmYWxzZVwiXHJcbiAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb249XCJsaW5lYXJcIlxyXG4gICAgICAgICAgICAgICAgICBbdHJhbnNpdGlvbkR1cmF0aW9uXT1cImN1cnJlbnRUaW1lb3V0XCJcclxuICAgICAgICAgICAgICAgICAgW2NhbkNvbXBsZXRlbHlFbXB0eV09XCJ0cnVlXCI+PC9mdWktcHJvZ3Jlc3M+XHJcbjwvZGl2PlxyXG5gXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGdWlNZXNzYWdlIGltcGxlbWVudHMgSU1lc3NhZ2Uge1xyXG4gIHB1YmxpYyBpc0R5bmFtaWM6IGJvb2xlYW47XHJcbiAgcHVibGljIGlzQ2xvc2luZzogYm9vbGVhbjtcclxuICBwdWJsaWMgaXNEaXNtaXNzaW5nOiBib29sZWFuO1xyXG5cclxuICBwdWJsaWMgdGV4dDogc3RyaW5nO1xyXG4gIHB1YmxpYyBoZWFkZXI/OiBzdHJpbmc7XHJcbiAgcHVibGljIHN0YXRlOiBNZXNzYWdlU3RhdGU7XHJcblxyXG4gIHB1YmxpYyB0aW1lb3V0OiBudW1iZXI7XHJcbiAgcHVibGljIGV4dGVuZGVkVGltZW91dDogbnVtYmVyO1xyXG4gIHB1YmxpYyBjdXJyZW50VGltZW91dDogbnVtYmVyO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyBoYXNEaXNtaXNzQnV0dG9uOiBib29sZWFuO1xyXG5cclxuICBwdWJsaWMgaGFzUHJvZ3Jlc3M6IGJvb2xlYW47XHJcblxyXG4gIHB1YmxpYyB0aW1lb3V0UHJvZ3Jlc3M6IG51bWJlcjtcclxuXHJcbiAgcHVibGljIHRyYW5zaXRpb25Db250cm9sbGVyOiBUcmFuc2l0aW9uQ29udHJvbGxlcjtcclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgdHJhbnNpdGlvbjogc3RyaW5nO1xyXG4gIHB1YmxpYyB0cmFuc2l0aW9uSW5EdXJhdGlvbjogbnVtYmVyO1xyXG5cclxuICBASW5wdXQoJ3RyYW5zaXRpb25EdXJhdGlvbicpXHJcbiAgcHVibGljIHRyYW5zaXRpb25PdXREdXJhdGlvbjogbnVtYmVyO1xyXG4gIEBPdXRwdXQoJ2NsaWNrJylcclxuICBwdWJsaWMgb25DbGljazogRXZlbnRFbWl0dGVyPHZvaWQ+O1xyXG4gIEBPdXRwdXQoJ2Rpc21pc3MnKVxyXG4gIHB1YmxpYyBvbkRpc21pc3M6IEV2ZW50RW1pdHRlcjx2b2lkPjtcclxuICBASW5wdXQoJ2NsYXNzJylcclxuICBwdWJsaWMgY2xhc3Nlczogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2Rpc3BsYXlUaW1lb3V0OiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgY29uc3QgY29uZmlnID0gbmV3IE1lc3NhZ2VDb25maWcoJycpO1xyXG4gICAgdGhpcy5sb2FkQ29uZmlnKGNvbmZpZyk7XHJcblxyXG4gICAgdGhpcy5pc0R5bmFtaWMgPSBmYWxzZTtcclxuICAgIHRoaXMudHJhbnNpdGlvbk91dER1cmF0aW9uID0gMzAwO1xyXG4gICAgdGhpcy50aW1lb3V0UHJvZ3Jlc3MgPSAxMDA7XHJcblxyXG4gICAgdGhpcy50cmFuc2l0aW9uQ29udHJvbGxlciA9IG5ldyBUcmFuc2l0aW9uQ29udHJvbGxlcihmYWxzZSk7XHJcblxyXG4gICAgdGhpcy5zaG93KCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGR5bmFtaWNDbGFzc2VzKCk6IElEeW5hbWljQ2xhc3NlcyB7XHJcbiAgICBjb25zdCBjbGFzc2VzOiBJRHluYW1pY0NsYXNzZXMgPSB7fTtcclxuICAgIGNsYXNzZXNbdGhpcy5zdGF0ZV0gPSB0cnVlO1xyXG5cclxuICAgIGlmICh0aGlzLmlzRHluYW1pYyAmJiB0aGlzLmhhc1Byb2dyZXNzKSB7XHJcbiAgICAgIGNsYXNzZXMuYXR0YWNoZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgICh0aGlzLmNsYXNzZXMgfHwgJycpXHJcbiAgICAgIC5zcGxpdCgnICcpXHJcbiAgICAgIC5mb3JFYWNoKGMgPT4gY2xhc3Nlc1tjXSA9IHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjbGFzc2VzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGxvYWRDb25maWcoY29uZmlnOiBNZXNzYWdlQ29uZmlnKTogdm9pZCB7XHJcbiAgICB0aGlzLmlzRHluYW1pYyA9IHRydWU7XHJcblxyXG4gICAgdGhpcy50ZXh0ID0gY29uZmlnLnRleHQ7XHJcbiAgICB0aGlzLmhlYWRlciA9IGNvbmZpZy5oZWFkZXI7XHJcbiAgICB0aGlzLnN0YXRlID0gY29uZmlnLnN0YXRlO1xyXG5cclxuICAgIHRoaXMudGltZW91dCA9IGNvbmZpZy50aW1lb3V0O1xyXG4gICAgdGhpcy5leHRlbmRlZFRpbWVvdXQgPSBjb25maWcuZXh0ZW5kZWRUaW1lb3V0O1xyXG5cclxuICAgIHRoaXMuaGFzRGlzbWlzc0J1dHRvbiA9IGNvbmZpZy5oYXNEaXNtaXNzQnV0dG9uO1xyXG4gICAgdGhpcy5oYXNQcm9ncmVzcyA9IGNvbmZpZy5oYXNQcm9ncmVzcztcclxuXHJcbiAgICB0aGlzLnRyYW5zaXRpb24gPSBjb25maWcudHJhbnNpdGlvbjtcclxuICAgIHRoaXMudHJhbnNpdGlvbkluRHVyYXRpb24gPSBjb25maWcudHJhbnNpdGlvbkluRHVyYXRpb247XHJcbiAgICB0aGlzLnRyYW5zaXRpb25PdXREdXJhdGlvbiA9IGNvbmZpZy50cmFuc2l0aW9uT3V0RHVyYXRpb247XHJcblxyXG4gICAgdGhpcy5vbkNsaWNrID0gY29uZmlnLm9uQ2xpY2s7XHJcbiAgICB0aGlzLm9uRGlzbWlzcyA9IGNvbmZpZy5vbkRpc21pc3M7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2hvdygpOiB2b2lkIHtcclxuICAgIHRoaXMudHJhbnNpdGlvbkNvbnRyb2xsZXIuc3RvcEFsbCgpO1xyXG4gICAgdGhpcy50cmFuc2l0aW9uQ29udHJvbGxlci5hbmltYXRlKFxyXG4gICAgICBuZXcgVHJhbnNpdGlvbihcclxuICAgICAgICB0aGlzLnRyYW5zaXRpb24sXHJcbiAgICAgICAgdGhpcy5pc0R5bmFtaWMgPyB0aGlzLnRyYW5zaXRpb25JbkR1cmF0aW9uIDogMCxcclxuICAgICAgICBUcmFuc2l0aW9uRGlyZWN0aW9uLkluLFxyXG4gICAgICAgICgpID0+IHtcclxuICAgICAgICAgIGlmICh0aGlzLmlzRHluYW1pYykge1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luVGltZXIodGhpcy50aW1lb3V0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZGlzbWlzcygpOiB2b2lkIHtcclxuICAgIHRoaXMuaXNEaXNtaXNzaW5nID0gdHJ1ZTtcclxuICAgIHRoaXMudHJhbnNpdGlvbk91dER1cmF0aW9uID0gdGhpcy50cmFuc2l0aW9uSW5EdXJhdGlvbjtcclxuXHJcbiAgICB0aGlzLmhpZGUoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBoaWRlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5pc0Nsb3NpbmcgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMudHJhbnNpdGlvbkNvbnRyb2xsZXIuc3RvcEFsbCgpO1xyXG4gICAgdGhpcy50cmFuc2l0aW9uQ29udHJvbGxlci5hbmltYXRlKFxyXG4gICAgICBuZXcgVHJhbnNpdGlvbihcclxuICAgICAgICB0aGlzLnRyYW5zaXRpb24sXHJcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uT3V0RHVyYXRpb24sXHJcbiAgICAgICAgVHJhbnNpdGlvbkRpcmVjdGlvbi5PdXQsXHJcbiAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5pc0Nsb3NpbmcgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMub25EaXNtaXNzLmVtaXQoKTtcclxuICAgICAgICB9KSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYmVnaW5UaW1lcih0aW1lb3V0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmlzRHluYW1pYyAmJiAhdGhpcy5pc0Rpc21pc3NpbmcpIHtcclxuICAgICAgdGhpcy50aW1lb3V0UHJvZ3Jlc3MgPSAwO1xyXG4gICAgICB0aGlzLmN1cnJlbnRUaW1lb3V0ID0gdGltZW91dDtcclxuICAgICAgdGhpcy5fZGlzcGxheVRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLm9uVGltZWRPdXQoKSwgdGltZW91dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2FuY2VsVGltZXIoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5pc0R5bmFtaWMgJiYgIXRoaXMuaXNEaXNtaXNzaW5nKSB7XHJcbiAgICAgIHRoaXMudGltZW91dFByb2dyZXNzID0gMTAwO1xyXG4gICAgICB0aGlzLmN1cnJlbnRUaW1lb3V0ID0gMDtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2Rpc3BsYXlUaW1lb3V0KTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmlzQ2xvc2luZykge1xyXG4gICAgICAgIHRoaXMuaXNDbG9zaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNpdGlvbkNvbnRyb2xsZXIuY2FuY2VsKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBvbkNsaWNrZWQoZTogSGFuZGxlZEV2ZW50KTogdm9pZCB7XHJcbiAgICBpZiAoIWUuZXZlbnRIYW5kbGVkKSB7XHJcbiAgICAgIHRoaXMuY2FuY2VsVGltZXIoKTtcclxuICAgICAgdGhpcy5vbkNsaWNrLmVtaXQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBvbkRpc21pc3NDbGlja2VkKGU6IEhhbmRsZWRFdmVudCk6IHZvaWQge1xyXG4gICAgZS5ldmVudEhhbmRsZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uVGltZWRPdXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmhpZGUoKTtcclxuICB9XHJcbn1cclxuIl19