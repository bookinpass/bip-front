/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, ElementRef, HostBinding, Input, Renderer2 } from '@angular/core';
var FuiCollapse = /** @class */ (function () {
    function FuiCollapse(_element, _renderer) {
        this._element = _element;
        this._renderer = _renderer;
        this._pristine = true;
        // Collapse animation duration is 350ms by default.
        this.collapseDuration = 350;
        this._isExpanded = false;
        this._isCollapsing = false;
    }
    Object.defineProperty(FuiCollapse.prototype, "isCollapsed", {
        // Set when the collapse is closed, and not animating.
        get: 
        // Set when the collapse is closed, and not animating.
        /**
         * @return {?}
         */
        function () {
            return !this.isExpanded && !this.isCollapsing;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FuiCollapse.prototype, "fuiCollapse", {
        get: /**
         * @return {?}
         */
        function () {
            return this._isExpanded;
        },
        // Sets the state of the collapse, `true` is collapsed.
        set: 
        // Sets the state of the collapse, `true` is collapsed.
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value) {
                this.hide();
            }
            else {
                this.show();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FuiCollapse.prototype, "isExpanded", {
        // Set when the collapse is open, and not animating.
        get: 
        // Set when the collapse is open, and not animating.
        /**
         * @return {?}
         */
        function () {
            return this._isExpanded;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FuiCollapse.prototype, "isCollapsing", {
        // Set when the collapse is animating.
        get: 
        // Set when the collapse is animating.
        /**
         * @return {?}
         */
        function () {
            return this._isCollapsing;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FuiCollapse.prototype, "_animationDuration", {
        get: /**
         * @private
         * @return {?}
         */
        function () {
            return this._pristine ? 0 : this.collapseDuration;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FuiCollapse.prototype.hide = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this._isCollapsing = true;
        this._isExpanded = false;
        // Forcibly hide the overflow so that content is not visible past the boundaries of its container.
        this._renderer.setStyle(this._element.nativeElement, 'overflow', 'hidden');
        // Animate the host element from its scroll height to 0.
        this.animate(this._element.nativeElement.scrollHeight, 0, false, (/**
         * @return {?}
         */
        function () {
            _this._isCollapsing = false;
        }));
    };
    /**
     * @return {?}
     */
    FuiCollapse.prototype.show = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this._isCollapsing = true;
        // Animate the host element from its offset height to its scroll height.
        this.animate(this._element.nativeElement.offsetHeight, this._element.nativeElement.scrollHeight, true, (/**
         * @return {?}
         */
        function () {
            // Remove the overflow override to enable user styling once again.
            _this._renderer.removeStyle(_this._element.nativeElement, 'overflow');
            _this._isCollapsing = false;
            _this._isExpanded = true;
        }));
    };
    /**
     * @private
     * @param {?} startHeight
     * @param {?} endHeight
     * @param {?=} removeOnComplete
     * @param {?=} callback
     * @return {?}
     */
    FuiCollapse.prototype.animate = /**
     * @private
     * @param {?} startHeight
     * @param {?} endHeight
     * @param {?=} removeOnComplete
     * @param {?=} callback
     * @return {?}
     */
    function (startHeight, endHeight, removeOnComplete, callback) {
        if (removeOnComplete === void 0) { removeOnComplete = false; }
        if (callback === void 0) { callback = (/**
         * @return {?}
         */
        function () {
        }); }
        /** @type {?} */
        var heightFrames = [
            {
                offset: 0,
                height: startHeight + "px"
            },
            {
                offset: 1,
                height: endHeight + "px"
            }
        ];
        if (removeOnComplete) {
            heightFrames.push({
                offset: 1,
                height: "auto"
            });
        }
        // Animate the collapse using the web animations API.
        // Using directly because Renderer2 doesn't have invokeElementMethod method anymore.
        this._element.nativeElement.animate(heightFrames, {
            delay: 0,
            // Disable animation on 1st collapse / expansion.
            duration: this._animationDuration,
            iterations: 1,
            easing: 'ease',
            fill: 'both'
        });
        if (this._pristine) {
            // Remove pristine flag when first hit.
            this._pristine = false;
        }
        setTimeout((/**
         * @return {?}
         */
        function () { return callback(); }), this.collapseDuration);
    };
    FuiCollapse.decorators = [
        { type: Directive, args: [{
                    selector: '[fuiCollapse]'
                },] }
    ];
    /** @nocollapse */
    FuiCollapse.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    FuiCollapse.propDecorators = {
        collapseDuration: [{ type: Input }],
        isCollapsed: [{ type: HostBinding, args: ['class.collapsed',] }],
        fuiCollapse: [{ type: Input }],
        isExpanded: [{ type: HostBinding, args: ['class.expanded',] }],
        isCollapsing: [{ type: HostBinding, args: ['class.collapsing',] }]
    };
    return FuiCollapse;
}());
export { FuiCollapse };
if (false) {
    /** @type {?} */
    FuiCollapse.prototype.collapseDuration;
    /**
     * @type {?}
     * @private
     */
    FuiCollapse.prototype._pristine;
    /**
     * @type {?}
     * @private
     */
    FuiCollapse.prototype._isExpanded;
    /**
     * @type {?}
     * @private
     */
    FuiCollapse.prototype._isCollapsing;
    /**
     * @type {?}
     * @private
     */
    FuiCollapse.prototype._element;
    /**
     * @type {?}
     * @private
     */
    FuiCollapse.prototype._renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGFwc2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtZm9tYW50aWMtdWkvIiwic291cmNlcyI6WyJtb2R1bGVzL2NvbGxhcHNlL2RpcmVjdGl2ZXMvY29sbGFwc2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRW5GO0lBVUUscUJBQTJCLFFBQW9CLEVBQVUsU0FBb0I7UUFBbEQsYUFBUSxHQUFSLFFBQVEsQ0FBWTtRQUFVLGNBQVMsR0FBVCxTQUFTLENBQVc7UUFDM0UsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7UUFFdEIsbURBQW1EO1FBQ25ELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxHQUFHLENBQUM7UUFFNUIsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFDekIsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7SUFDN0IsQ0FBQztJQUdELHNCQUNXLG9DQUFXO1FBRnRCLHNEQUFzRDs7Ozs7O1FBQ3REO1lBRUUsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQ2hELENBQUM7OztPQUFBO0lBRUQsc0JBQ1csb0NBQVc7Ozs7UUFEdEI7WUFFRSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7UUFDMUIsQ0FBQztRQUVELHVEQUF1RDs7Ozs7OztRQUN2RCxVQUF1QixLQUFjO1lBQ25DLElBQUksS0FBSyxFQUFFO2dCQUNULElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzthQUNiO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzthQUNiO1FBQ0gsQ0FBQzs7O09BVEE7SUFjRCxzQkFDVyxtQ0FBVTtRQUZyQixvREFBb0Q7Ozs7OztRQUNwRDtZQUVFLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUMx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LFFBQVEsRUFBRSxlQUFlO2lCQUMxQjs7OztnQkFKa0IsVUFBVTtnQkFBc0IsU0FBUzs7O21DQU96RCxLQUFLOzhCQWdCTCxXQUFXLFNBQUMsaUJBQWlCOzhCQUs3QixLQUFLOzZCQWlCTCxXQUFXLFNBQUMsZ0JBQWdCOytCQVE1QixXQUFXLFNBQUMsa0JBQWtCOztJQTRFakMsa0JBQUM7Q0FBQSxBQS9IRCxJQStIQztTQTVIWSxXQUFXOzs7SUFFdEIsdUNBQ2dDOzs7OztJQUVoQyxnQ0FBMkI7Ozs7O0lBZ0MzQixrQ0FBNkI7Ozs7O0lBUTdCLG9DQUErQjs7Ozs7SUF0Q1osK0JBQTRCOzs7OztJQUFFLGdDQUE0QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RGlyZWN0aXZlLCBFbGVtZW50UmVmLCBIb3N0QmluZGluZywgSW5wdXQsIFJlbmRlcmVyMn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ1tmdWlDb2xsYXBzZV0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGdWlDb2xsYXBzZSB7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIGNvbGxhcHNlRHVyYXRpb246IG51bWJlcjtcclxuICAvLyBGbGFnIHRoYXQgaXMgaW5pdGlhbGx5IHRydWUsIHRvIG1ha2UgdGhlIDFzdCBhbmltYXRpb24gaW5zdGFudGFuZW91cy5cclxuICBwcml2YXRlIF9wcmlzdGluZTogYm9vbGVhbjtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgX2VsZW1lbnQ6IEVsZW1lbnRSZWYsIHByaXZhdGUgX3JlbmRlcmVyOiBSZW5kZXJlcjIpIHtcclxuICAgIHRoaXMuX3ByaXN0aW5lID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBDb2xsYXBzZSBhbmltYXRpb24gZHVyYXRpb24gaXMgMzUwbXMgYnkgZGVmYXVsdC5cclxuICAgIHRoaXMuY29sbGFwc2VEdXJhdGlvbiA9IDM1MDtcclxuXHJcbiAgICB0aGlzLl9pc0V4cGFuZGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc0NvbGxhcHNpbmcgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIFNldCB3aGVuIHRoZSBjb2xsYXBzZSBpcyBjbG9zZWQsIGFuZCBub3QgYW5pbWF0aW5nLlxyXG4gIEBIb3N0QmluZGluZygnY2xhc3MuY29sbGFwc2VkJylcclxuICBwdWJsaWMgZ2V0IGlzQ29sbGFwc2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuICF0aGlzLmlzRXhwYW5kZWQgJiYgIXRoaXMuaXNDb2xsYXBzaW5nO1xyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgZ2V0IGZ1aUNvbGxhcHNlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzRXhwYW5kZWQ7XHJcbiAgfVxyXG5cclxuICAvLyBTZXRzIHRoZSBzdGF0ZSBvZiB0aGUgY29sbGFwc2UsIGB0cnVlYCBpcyBjb2xsYXBzZWQuXHJcbiAgcHVibGljIHNldCBmdWlDb2xsYXBzZSh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zaG93KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9pc0V4cGFuZGVkOiBib29sZWFuO1xyXG5cclxuICAvLyBTZXQgd2hlbiB0aGUgY29sbGFwc2UgaXMgb3BlbiwgYW5kIG5vdCBhbmltYXRpbmcuXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5leHBhbmRlZCcpXHJcbiAgcHVibGljIGdldCBpc0V4cGFuZGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzRXhwYW5kZWQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9pc0NvbGxhcHNpbmc6IGJvb2xlYW47XHJcblxyXG4gIC8vIFNldCB3aGVuIHRoZSBjb2xsYXBzZSBpcyBhbmltYXRpbmcuXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5jb2xsYXBzaW5nJylcclxuICBwdWJsaWMgZ2V0IGlzQ29sbGFwc2luZygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0NvbGxhcHNpbmc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldCBfYW5pbWF0aW9uRHVyYXRpb24oKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9wcmlzdGluZSA/IDAgOiB0aGlzLmNvbGxhcHNlRHVyYXRpb247XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaGlkZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuX2lzQ29sbGFwc2luZyA9IHRydWU7XHJcbiAgICB0aGlzLl9pc0V4cGFuZGVkID0gZmFsc2U7XHJcblxyXG4gICAgLy8gRm9yY2libHkgaGlkZSB0aGUgb3ZlcmZsb3cgc28gdGhhdCBjb250ZW50IGlzIG5vdCB2aXNpYmxlIHBhc3QgdGhlIGJvdW5kYXJpZXMgb2YgaXRzIGNvbnRhaW5lci5cclxuICAgIHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKHRoaXMuX2VsZW1lbnQubmF0aXZlRWxlbWVudCwgJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG5cclxuICAgIC8vIEFuaW1hdGUgdGhlIGhvc3QgZWxlbWVudCBmcm9tIGl0cyBzY3JvbGwgaGVpZ2h0IHRvIDAuXHJcbiAgICB0aGlzLmFuaW1hdGUodGhpcy5fZWxlbWVudC5uYXRpdmVFbGVtZW50LnNjcm9sbEhlaWdodCwgMCwgZmFsc2UsICgpID0+IHtcclxuICAgICAgdGhpcy5faXNDb2xsYXBzaW5nID0gZmFsc2U7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzaG93KCk6IHZvaWQge1xyXG4gICAgdGhpcy5faXNDb2xsYXBzaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBBbmltYXRlIHRoZSBob3N0IGVsZW1lbnQgZnJvbSBpdHMgb2Zmc2V0IGhlaWdodCB0byBpdHMgc2Nyb2xsIGhlaWdodC5cclxuICAgIHRoaXMuYW5pbWF0ZSh0aGlzLl9lbGVtZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0LCB0aGlzLl9lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSGVpZ2h0LCB0cnVlLCAoKSA9PiB7XHJcbiAgICAgIC8vIFJlbW92ZSB0aGUgb3ZlcmZsb3cgb3ZlcnJpZGUgdG8gZW5hYmxlIHVzZXIgc3R5bGluZyBvbmNlIGFnYWluLlxyXG4gICAgICB0aGlzLl9yZW5kZXJlci5yZW1vdmVTdHlsZSh0aGlzLl9lbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICdvdmVyZmxvdycpO1xyXG5cclxuICAgICAgdGhpcy5faXNDb2xsYXBzaW5nID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuX2lzRXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFuaW1hdGUoc3RhcnRIZWlnaHQ6IG51bWJlciwgZW5kSGVpZ2h0OiBudW1iZXIsIHJlbW92ZU9uQ29tcGxldGU6IGJvb2xlYW4gPSBmYWxzZSwgY2FsbGJhY2s6ICgpID0+IHZvaWQgPSAoKSA9PiB7XHJcbiAgfSk6IHZvaWQge1xyXG4gICAgY29uc3QgaGVpZ2h0RnJhbWVzID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgb2Zmc2V0OiAwLFxyXG4gICAgICAgIGhlaWdodDogYCR7c3RhcnRIZWlnaHR9cHhgXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBvZmZzZXQ6IDEsXHJcbiAgICAgICAgaGVpZ2h0OiBgJHtlbmRIZWlnaHR9cHhgXHJcbiAgICAgIH1cclxuICAgIF07XHJcblxyXG4gICAgaWYgKHJlbW92ZU9uQ29tcGxldGUpIHtcclxuICAgICAgaGVpZ2h0RnJhbWVzLnB1c2goe1xyXG4gICAgICAgIG9mZnNldDogMSxcclxuICAgICAgICBoZWlnaHQ6IGBhdXRvYFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBbmltYXRlIHRoZSBjb2xsYXBzZSB1c2luZyB0aGUgd2ViIGFuaW1hdGlvbnMgQVBJLlxyXG4gICAgLy8gVXNpbmcgZGlyZWN0bHkgYmVjYXVzZSBSZW5kZXJlcjIgZG9lc24ndCBoYXZlIGludm9rZUVsZW1lbnRNZXRob2QgbWV0aG9kIGFueW1vcmUuXHJcbiAgICB0aGlzLl9lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuYW5pbWF0ZShcclxuICAgICAgaGVpZ2h0RnJhbWVzLFxyXG4gICAgICB7XHJcbiAgICAgICAgZGVsYXk6IDAsXHJcbiAgICAgICAgLy8gRGlzYWJsZSBhbmltYXRpb24gb24gMXN0IGNvbGxhcHNlIC8gZXhwYW5zaW9uLlxyXG4gICAgICAgIGR1cmF0aW9uOiB0aGlzLl9hbmltYXRpb25EdXJhdGlvbixcclxuICAgICAgICBpdGVyYXRpb25zOiAxLFxyXG4gICAgICAgIGVhc2luZzogJ2Vhc2UnLFxyXG4gICAgICAgIGZpbGw6ICdib3RoJ1xyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIGlmICh0aGlzLl9wcmlzdGluZSkge1xyXG4gICAgICAvLyBSZW1vdmUgcHJpc3RpbmUgZmxhZyB3aGVuIGZpcnN0IGhpdC5cclxuICAgICAgdGhpcy5fcHJpc3RpbmUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IGNhbGxiYWNrKCksIHRoaXMuY29sbGFwc2VEdXJhdGlvbik7XHJcbiAgfVxyXG59XHJcbiJdfQ==