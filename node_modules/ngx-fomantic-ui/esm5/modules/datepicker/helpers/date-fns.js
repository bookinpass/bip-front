/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { format, parse } from 'date-fns';
import * as defaultLocale from 'date-fns/locale/en';
/**
 * @record
 */
function IDateFnsLocaleValues() { }
/**
 * @record
 */
function IDateFnsHelperOptions() { }
if (false) {
    /** @type {?} */
    IDateFnsHelperOptions.prototype.type;
}
/**
 * @record
 */
function IDateFnsCustomLocale() { }
if (false) {
    /** @type {?} */
    IDateFnsCustomLocale.prototype.localize;
    /** @type {?} */
    IDateFnsCustomLocale.prototype.match;
    /** @type {?|undefined} */
    IDateFnsCustomLocale.prototype.options;
}
/**
 * @param {?} values
 * @param {?} defaultType
 * @param {?=} indexCallback
 * @return {?}
 */
function buildLocalizeFn(values, defaultType, indexCallback) {
    return (/**
     * @param {?} dirtyIndex
     * @param {?=} __1
     * @return {?}
     */
    function (dirtyIndex, _a) {
        var type = (_a === void 0 ? { type: defaultType } : _a).type;
        /** @type {?} */
        var index = indexCallback ? indexCallback(dirtyIndex) : dirtyIndex;
        return values["" + type][index];
    });
}
/**
 * @param {?} values
 * @param {?} defaultType
 * @return {?}
 */
function buildLocalizeArrayFn(values, defaultType) {
    return (/**
     * @param {?=} __0
     * @return {?}
     */
    function (_a) {
        var type = (_a === void 0 ? { type: defaultType } : _a).type;
        return values["" + type];
    });
}
/**
 * @param {?} patterns
 * @param {?} defaultType
 * @return {?}
 */
function buildMatchFn(patterns, defaultType) {
    return (/**
     * @param {?} dirtyString
     * @param {?=} __1
     * @return {?}
     */
    function (dirtyString, _a) {
        var type = (_a === void 0 ? { type: defaultType } : _a).type;
        return dirtyString.match("^(" + patterns["" + type].join('|') + ")");
    });
}
/**
 * @param {?} patterns
 * @param {?} defaultType
 * @return {?}
 */
function buildParseFn(patterns, defaultType) {
    return (/**
     * @param {?} __0
     * @param {?=} __1
     * @return {?}
     */
    function (_a, _b) {
        var _c = tslib_1.__read(_a, 2), result = _c[1];
        var type = (_b === void 0 ? { type: defaultType } : _b).type;
        return (patterns["" + type] || patterns[defaultType])
            .map((/**
         * @param {?} p
         * @return {?}
         */
        function (p) { return new RegExp("^" + p); }))
            .findIndex((/**
         * @param {?} pattern
         * @return {?}
         */
        function (pattern) { return pattern.test(result); }));
    });
}
var DateFnsParser = /** @class */ (function () {
    function DateFnsParser(locale) {
        this._weekStartsOn = (/** @type {?} */ (locale.firstDayOfWeek));
        /** @type {?} */
        var weekdayValues = {
            long: locale.weekdays,
            short: locale.weekdaysShort,
            narrow: locale.weekdaysNarrow
        };
        /** @type {?} */
        var monthValues = {
            long: locale.months,
            short: locale.monthsShort
        };
        /** @type {?} */
        var timeOfDayValues = {
            long: locale.timesOfDay,
            uppercase: locale.timesOfDayUppercase,
            lowercase: locale.timesOfDayLowercase
        };
        /** @type {?} */
        var timeOfDayMatchValues = {
            long: locale.timesOfDay,
            short: locale.timesOfDayUppercase.concat(locale.timesOfDayLowercase)
        };
        this._locale = (/** @type {?} */ (defaultLocale));
        this._locale.localize = tslib_1.__assign({}, this._locale.localize, {
            weekday: buildLocalizeFn(weekdayValues, 'long'),
            weekdays: buildLocalizeArrayFn(weekdayValues, 'long'),
            month: buildLocalizeFn(monthValues, 'long'),
            months: buildLocalizeArrayFn(monthValues, 'long'),
            timeOfDay: buildLocalizeFn(timeOfDayValues, 'long', (/**
             * @param {?} hours
             * @return {?}
             */
            function (hours) {
                return hours / 12 >= 1 ? 1 : 0;
            })),
            timesOfDay: buildLocalizeArrayFn(timeOfDayValues, 'long')
        });
        this._locale.match = tslib_1.__assign({}, this._locale.match, {
            weekdays: buildMatchFn(weekdayValues, 'long'),
            weekday: buildParseFn(weekdayValues, 'long'),
            months: buildMatchFn(monthValues, 'long'),
            month: buildParseFn(monthValues, 'long'),
            timesOfDay: buildMatchFn(timeOfDayMatchValues, 'long'),
            timeOfDay: buildParseFn(timeOfDayMatchValues, 'long')
        });
    }
    Object.defineProperty(DateFnsParser.prototype, "_config", {
        get: /**
         * @private
         * @return {?}
         */
        function () {
            return {
                weekStartsOn: this._weekStartsOn,
                locale: this._locale
            };
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} d
     * @param {?} f
     * @return {?}
     */
    DateFnsParser.prototype.format = /**
     * @param {?} d
     * @param {?} f
     * @return {?}
     */
    function (d, f) {
        return format(d, f, this._config);
    };
    /**
     * @param {?} dS
     * @param {?} f
     * @param {?} bD
     * @return {?}
     */
    DateFnsParser.prototype.parse = /**
     * @param {?} dS
     * @param {?} f
     * @param {?} bD
     * @return {?}
     */
    function (dS, f, bD) {
        return parse(dS, this._config);
    };
    return DateFnsParser;
}());
export { DateFnsParser };
if (false) {
    /**
     * @type {?}
     * @private
     */
    DateFnsParser.prototype._weekStartsOn;
    /**
     * @type {?}
     * @private
     */
    DateFnsParser.prototype._locale;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1mbnMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtZm9tYW50aWMtdWkvIiwic291cmNlcyI6WyJtb2R1bGVzL2RhdGVwaWNrZXIvaGVscGVycy9kYXRlLWZucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLE9BQU8sRUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQ3ZDLE9BQU8sS0FBSyxhQUFhLE1BQU0sb0JBQW9CLENBQUM7Ozs7QUFFcEQsbUNBRUM7Ozs7QUFFRCxvQ0FFQzs7O0lBREMscUNBQWE7Ozs7O0FBTWYsbUNBb0JDOzs7SUFuQkMsd0NBT0U7O0lBQ0YscUNBT0U7O0lBQ0YsdUNBRUU7Ozs7Ozs7O0FBR0osU0FBUyxlQUFlLENBQUMsTUFBNEIsRUFDNUIsV0FBbUIsRUFDbkIsYUFBNEM7SUFFbkU7Ozs7O0lBQU8sVUFBQyxVQUFrQixFQUFFLEVBQTRCO1lBQTNCLHdEQUFJOztZQUN6QixLQUFLLEdBQUcsYUFBYSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVU7UUFDcEUsT0FBTyxNQUFNLENBQUMsS0FBRyxJQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsQyxDQUFDLEVBQUM7QUFDSixDQUFDOzs7Ozs7QUFFRCxTQUFTLG9CQUFvQixDQUFDLE1BQTRCLEVBQUUsV0FBbUI7SUFDN0U7Ozs7SUFBTyxVQUFDLEVBQTRCO1lBQTNCLHdEQUFJO1FBQTRCLE9BQUEsTUFBTSxDQUFDLEtBQUcsSUFBTSxDQUFDO0lBQWpCLENBQWlCLEVBQUM7QUFDN0QsQ0FBQzs7Ozs7O0FBRUQsU0FBUyxZQUFZLENBQUMsUUFBOEIsRUFBRSxXQUFtQjtJQUN2RTs7Ozs7SUFBTyxVQUFDLFdBQVcsRUFBRSxFQUE0QjtZQUEzQix3REFBSTtRQUN4QixPQUFBLFdBQVcsQ0FBQyxLQUFLLENBQUMsT0FBSyxRQUFRLENBQUMsS0FBRyxJQUFNLENBQUMsQ0FB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RSxZQUFZLENBQUMsb0JBQW9CLEVBQUUsTUFBTSxDQUFDO1NBQ3RELENBQ0YsQ0FBQztJQUNKLENBQUM7SUFFRCxzQkFBWSxrQ0FBTzs7Ozs7UUFBbkI7WUFDRSxPQUFPO2dCQUNMLFlBQVksRUFBRSxJQUFJLENBQUMsYUFBYTtnQkFDaEMsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPO2FBQ3JCLENBQUM7UUFDSixDQUFDOzs7T0FBQTs7Ozs7O0lBRU0sOEJBQU07Ozs7O0lBQWIsVUFBYyxDQUFPLEVBQUUsQ0FBUztRQUM5QixPQUFPLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNwQyxDQUFDOzs7Ozs7O0lBRU0sNkJBQUs7Ozs7OztJQUFaLFVBQWEsRUFBVSxFQUFFLENBQVMsRUFBRSxFQUFRO1FBQzFDLE9BQU8sS0FBSyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUNILG9CQUFDO0FBQUQsQ0FBQyxBQXRFRCxJQXNFQzs7Ozs7OztJQXJFQyxzQ0FBMkM7Ozs7O0lBQzNDLGdDQUFzQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SURhdGVwaWNrZXJMb2NhbGVWYWx1ZXN9IGZyb20gJy4uLy4uLy4uL2JlaGF2aW9ycy9sb2NhbGl6YXRpb24vaW50ZXJuYWwnO1xyXG5pbXBvcnQge2Zvcm1hdCwgcGFyc2V9IGZyb20gJ2RhdGUtZm5zJztcclxuaW1wb3J0ICogYXMgZGVmYXVsdExvY2FsZSBmcm9tICdkYXRlLWZucy9sb2NhbGUvZW4nO1xyXG5cclxuaW50ZXJmYWNlIElEYXRlRm5zTG9jYWxlVmFsdWVzIHtcclxuICBbbmFtZTogc3RyaW5nXTogc3RyaW5nW107XHJcbn1cclxuXHJcbmludGVyZmFjZSBJRGF0ZUZuc0hlbHBlck9wdGlvbnMge1xyXG4gIHR5cGU6IHN0cmluZztcclxufVxyXG5cclxudHlwZSBEYXRlRm5zSGVscGVyPFUsIFQ+ID0gKHZhbHVlOiBVLCBvcHRpb25zOiBJRGF0ZUZuc0hlbHBlck9wdGlvbnMpID0+IFQ7XHJcbnR5cGUgRGF0ZUZuc1dlZWtTdGFydHNPbiA9IDAgfCAxIHwgMiB8IDMgfCA0IHwgNSB8IDY7XHJcblxyXG5pbnRlcmZhY2UgSURhdGVGbnNDdXN0b21Mb2NhbGUge1xyXG4gIGxvY2FsaXplOiB7XHJcbiAgICB3ZWVrZGF5OiBEYXRlRm5zSGVscGVyPG51bWJlciwgc3RyaW5nPjtcclxuICAgIHdlZWtkYXlzOiBEYXRlRm5zSGVscGVyPElEYXRlRm5zSGVscGVyT3B0aW9ucywgc3RyaW5nW10+O1xyXG4gICAgbW9udGg6IERhdGVGbnNIZWxwZXI8bnVtYmVyLCBzdHJpbmc+O1xyXG4gICAgbW9udGhzOiBEYXRlRm5zSGVscGVyPElEYXRlRm5zSGVscGVyT3B0aW9ucywgc3RyaW5nW10+O1xyXG4gICAgdGltZU9mRGF5OiBEYXRlRm5zSGVscGVyPG51bWJlciwgc3RyaW5nPjtcclxuICAgIHRpbWVzT2ZEYXk6IERhdGVGbnNIZWxwZXI8SURhdGVGbnNIZWxwZXJPcHRpb25zLCBzdHJpbmdbXT47XHJcbiAgfTtcclxuICBtYXRjaDoge1xyXG4gICAgd2Vla2RheXM6IERhdGVGbnNIZWxwZXI8c3RyaW5nLCBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbD47XHJcbiAgICB3ZWVrZGF5PzogRGF0ZUZuc0hlbHBlcjxSZWdFeHBNYXRjaEFycmF5LCBudW1iZXI+O1xyXG4gICAgbW9udGhzOiBEYXRlRm5zSGVscGVyPHN0cmluZywgUmVnRXhwTWF0Y2hBcnJheSB8IG51bGw+O1xyXG4gICAgbW9udGg/OiBEYXRlRm5zSGVscGVyPFJlZ0V4cE1hdGNoQXJyYXksIG51bWJlcj47XHJcbiAgICB0aW1lc09mRGF5OiBEYXRlRm5zSGVscGVyPHN0cmluZywgUmVnRXhwTWF0Y2hBcnJheSB8IG51bGw+O1xyXG4gICAgdGltZU9mRGF5PzogRGF0ZUZuc0hlbHBlcjxSZWdFeHBNYXRjaEFycmF5LCBudW1iZXI+O1xyXG4gIH07XHJcbiAgb3B0aW9ucz86IHtcclxuICAgIHdlZWtTdGFydHNPbj86IG51bWJlcjtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZExvY2FsaXplRm4odmFsdWVzOiBJRGF0ZUZuc0xvY2FsZVZhbHVlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRUeXBlOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleENhbGxiYWNrPzogKG9sZEluZGV4OiBudW1iZXIpID0+IG51bWJlcik6IERhdGVGbnNIZWxwZXI8bnVtYmVyLCBzdHJpbmc+IHtcclxuXHJcbiAgcmV0dXJuIChkaXJ0eUluZGV4OiBudW1iZXIsIHt0eXBlfSA9IHt0eXBlOiBkZWZhdWx0VHlwZX0pID0+IHtcclxuICAgIGNvbnN0IGluZGV4ID0gaW5kZXhDYWxsYmFjayA/IGluZGV4Q2FsbGJhY2soZGlydHlJbmRleCkgOiBkaXJ0eUluZGV4O1xyXG4gICAgcmV0dXJuIHZhbHVlc1tgJHt0eXBlfWBdW2luZGV4XTtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZExvY2FsaXplQXJyYXlGbih2YWx1ZXM6IElEYXRlRm5zTG9jYWxlVmFsdWVzLCBkZWZhdWx0VHlwZTogc3RyaW5nKTogRGF0ZUZuc0hlbHBlcjxJRGF0ZUZuc0hlbHBlck9wdGlvbnMsIHN0cmluZ1tdPiB7XHJcbiAgcmV0dXJuICh7dHlwZX0gPSB7dHlwZTogZGVmYXVsdFR5cGV9KSA9PiB2YWx1ZXNbYCR7dHlwZX1gXTtcclxufVxyXG5cclxuZnVuY3Rpb24gYnVpbGRNYXRjaEZuKHBhdHRlcm5zOiBJRGF0ZUZuc0xvY2FsZVZhbHVlcywgZGVmYXVsdFR5cGU6IHN0cmluZyk6IERhdGVGbnNIZWxwZXI8c3RyaW5nLCBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbD4ge1xyXG4gIHJldHVybiAoZGlydHlTdHJpbmcsIHt0eXBlfSA9IHt0eXBlOiBkZWZhdWx0VHlwZX0pID0+XHJcbiAgICBkaXJ0eVN0cmluZy5tYXRjaChgXigke3BhdHRlcm5zW2Ake3R5cGV9YF0uam9pbignfCcpfSlgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYnVpbGRQYXJzZUZuKHBhdHRlcm5zOiBJRGF0ZUZuc0xvY2FsZVZhbHVlcywgZGVmYXVsdFR5cGU6IHN0cmluZyk6IERhdGVGbnNIZWxwZXI8UmVnRXhwTWF0Y2hBcnJheSwgbnVtYmVyPiB7XHJcbiAgcmV0dXJuIChbLCByZXN1bHRdLCB7dHlwZX0gPSB7dHlwZTogZGVmYXVsdFR5cGV9KSA9PlxyXG4gICAgKHBhdHRlcm5zW2Ake3R5cGV9YF0gfHwgcGF0dGVybnNbZGVmYXVsdFR5cGVdKVxyXG4gICAgICAubWFwKHAgPT4gbmV3IFJlZ0V4cChgXiR7cH1gKSlcclxuICAgICAgLmZpbmRJbmRleChwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChyZXN1bHQpKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERhdGVGbnNQYXJzZXIge1xyXG4gIHByaXZhdGUgX3dlZWtTdGFydHNPbjogRGF0ZUZuc1dlZWtTdGFydHNPbjtcclxuICBwcml2YXRlIF9sb2NhbGU6IElEYXRlRm5zQ3VzdG9tTG9jYWxlO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihsb2NhbGU6IElEYXRlcGlja2VyTG9jYWxlVmFsdWVzKSB7XHJcbiAgICB0aGlzLl93ZWVrU3RhcnRzT24gPSBsb2NhbGUuZmlyc3REYXlPZldlZWsgYXMgRGF0ZUZuc1dlZWtTdGFydHNPbjtcclxuXHJcbiAgICBjb25zdCB3ZWVrZGF5VmFsdWVzID0ge1xyXG4gICAgICBsb25nOiBsb2NhbGUud2Vla2RheXMsXHJcbiAgICAgIHNob3J0OiBsb2NhbGUud2Vla2RheXNTaG9ydCxcclxuICAgICAgbmFycm93OiBsb2NhbGUud2Vla2RheXNOYXJyb3dcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgbW9udGhWYWx1ZXMgPSB7XHJcbiAgICAgIGxvbmc6IGxvY2FsZS5tb250aHMsXHJcbiAgICAgIHNob3J0OiBsb2NhbGUubW9udGhzU2hvcnRcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdGltZU9mRGF5VmFsdWVzID0ge1xyXG4gICAgICBsb25nOiBsb2NhbGUudGltZXNPZkRheSxcclxuICAgICAgdXBwZXJjYXNlOiBsb2NhbGUudGltZXNPZkRheVVwcGVyY2FzZSxcclxuICAgICAgbG93ZXJjYXNlOiBsb2NhbGUudGltZXNPZkRheUxvd2VyY2FzZVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB0aW1lT2ZEYXlNYXRjaFZhbHVlcyA9IHtcclxuICAgICAgbG9uZzogbG9jYWxlLnRpbWVzT2ZEYXksXHJcbiAgICAgIHNob3J0OiBsb2NhbGUudGltZXNPZkRheVVwcGVyY2FzZS5jb25jYXQobG9jYWxlLnRpbWVzT2ZEYXlMb3dlcmNhc2UpXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuX2xvY2FsZSA9IGRlZmF1bHRMb2NhbGUgYXMgYW55O1xyXG4gICAgdGhpcy5fbG9jYWxlLmxvY2FsaXplID0ge1xyXG4gICAgICAuLi50aGlzLl9sb2NhbGUubG9jYWxpemUsXHJcbiAgICAgIC4uLntcclxuICAgICAgICB3ZWVrZGF5OiBidWlsZExvY2FsaXplRm4od2Vla2RheVZhbHVlcywgJ2xvbmcnKSxcclxuICAgICAgICB3ZWVrZGF5czogYnVpbGRMb2NhbGl6ZUFycmF5Rm4od2Vla2RheVZhbHVlcywgJ2xvbmcnKSxcclxuICAgICAgICBtb250aDogYnVpbGRMb2NhbGl6ZUZuKG1vbnRoVmFsdWVzLCAnbG9uZycpLFxyXG4gICAgICAgIG1vbnRoczogYnVpbGRMb2NhbGl6ZUFycmF5Rm4obW9udGhWYWx1ZXMsICdsb25nJyksXHJcbiAgICAgICAgdGltZU9mRGF5OiBidWlsZExvY2FsaXplRm4odGltZU9mRGF5VmFsdWVzLCAnbG9uZycsIChob3VyczogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gaG91cnMgLyAxMiA+PSAxID8gMSA6IDA7XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgdGltZXNPZkRheTogYnVpbGRMb2NhbGl6ZUFycmF5Rm4odGltZU9mRGF5VmFsdWVzLCAnbG9uZycpXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLl9sb2NhbGUubWF0Y2ggPSB7XHJcbiAgICAgIC4uLnRoaXMuX2xvY2FsZS5tYXRjaCxcclxuICAgICAgLi4ue1xyXG4gICAgICAgIHdlZWtkYXlzOiBidWlsZE1hdGNoRm4od2Vla2RheVZhbHVlcywgJ2xvbmcnKSxcclxuICAgICAgICB3ZWVrZGF5OiBidWlsZFBhcnNlRm4od2Vla2RheVZhbHVlcywgJ2xvbmcnKSxcclxuICAgICAgICBtb250aHM6IGJ1aWxkTWF0Y2hGbihtb250aFZhbHVlcywgJ2xvbmcnKSxcclxuICAgICAgICBtb250aDogYnVpbGRQYXJzZUZuKG1vbnRoVmFsdWVzLCAnbG9uZycpLFxyXG4gICAgICAgIHRpbWVzT2ZEYXk6IGJ1aWxkTWF0Y2hGbih0aW1lT2ZEYXlNYXRjaFZhbHVlcywgJ2xvbmcnKSxcclxuICAgICAgICB0aW1lT2ZEYXk6IGJ1aWxkUGFyc2VGbih0aW1lT2ZEYXlNYXRjaFZhbHVlcywgJ2xvbmcnKVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXQgX2NvbmZpZygpOiBhbnkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2Vla1N0YXJ0c09uOiB0aGlzLl93ZWVrU3RhcnRzT24sXHJcbiAgICAgIGxvY2FsZTogdGhpcy5fbG9jYWxlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGZvcm1hdChkOiBEYXRlLCBmOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGZvcm1hdChkLCBmLCB0aGlzLl9jb25maWcpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBhcnNlKGRTOiBzdHJpbmcsIGY6IHN0cmluZywgYkQ6IERhdGUpOiBEYXRlIHtcclxuICAgIHJldHVybiBwYXJzZShkUywgdGhpcy5fY29uZmlnKTtcclxuICB9XHJcbn1cclxuIl19