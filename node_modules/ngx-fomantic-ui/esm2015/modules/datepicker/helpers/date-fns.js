/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { format, parse } from 'date-fns';
import * as defaultLocale from 'date-fns/locale/en';
/**
 * @record
 */
function IDateFnsLocaleValues() { }
/**
 * @record
 */
function IDateFnsHelperOptions() { }
if (false) {
    /** @type {?} */
    IDateFnsHelperOptions.prototype.type;
}
/**
 * @record
 */
function IDateFnsCustomLocale() { }
if (false) {
    /** @type {?} */
    IDateFnsCustomLocale.prototype.localize;
    /** @type {?} */
    IDateFnsCustomLocale.prototype.match;
    /** @type {?|undefined} */
    IDateFnsCustomLocale.prototype.options;
}
/**
 * @param {?} values
 * @param {?} defaultType
 * @param {?=} indexCallback
 * @return {?}
 */
function buildLocalizeFn(values, defaultType, indexCallback) {
    return (/**
     * @param {?} dirtyIndex
     * @param {?=} __1
     * @return {?}
     */
    (dirtyIndex, { type } = { type: defaultType }) => {
        /** @type {?} */
        const index = indexCallback ? indexCallback(dirtyIndex) : dirtyIndex;
        return values[`${type}`][index];
    });
}
/**
 * @param {?} values
 * @param {?} defaultType
 * @return {?}
 */
function buildLocalizeArrayFn(values, defaultType) {
    return (/**
     * @param {?=} __0
     * @return {?}
     */
    ({ type } = { type: defaultType }) => values[`${type}`]);
}
/**
 * @param {?} patterns
 * @param {?} defaultType
 * @return {?}
 */
function buildMatchFn(patterns, defaultType) {
    return (/**
     * @param {?} dirtyString
     * @param {?=} __1
     * @return {?}
     */
    (dirtyString, { type } = { type: defaultType }) => dirtyString.match(`^(${patterns[`${type}`].join('|')})`));
}
/**
 * @param {?} patterns
 * @param {?} defaultType
 * @return {?}
 */
function buildParseFn(patterns, defaultType) {
    return (/**
     * @param {?} __0
     * @param {?=} __1
     * @return {?}
     */
    ([, result], { type } = { type: defaultType }) => (patterns[`${type}`] || patterns[defaultType])
        .map((/**
     * @param {?} p
     * @return {?}
     */
    p => new RegExp(`^${p}`)))
        .findIndex((/**
     * @param {?} pattern
     * @return {?}
     */
    pattern => pattern.test(result))));
}
export class DateFnsParser {
    /**
     * @param {?} locale
     */
    constructor(locale) {
        this._weekStartsOn = (/** @type {?} */ (locale.firstDayOfWeek));
        /** @type {?} */
        const weekdayValues = {
            long: locale.weekdays,
            short: locale.weekdaysShort,
            narrow: locale.weekdaysNarrow
        };
        /** @type {?} */
        const monthValues = {
            long: locale.months,
            short: locale.monthsShort
        };
        /** @type {?} */
        const timeOfDayValues = {
            long: locale.timesOfDay,
            uppercase: locale.timesOfDayUppercase,
            lowercase: locale.timesOfDayLowercase
        };
        /** @type {?} */
        const timeOfDayMatchValues = {
            long: locale.timesOfDay,
            short: locale.timesOfDayUppercase.concat(locale.timesOfDayLowercase)
        };
        this._locale = (/** @type {?} */ (defaultLocale));
        this._locale.localize = Object.assign({}, this._locale.localize, {
            weekday: buildLocalizeFn(weekdayValues, 'long'),
            weekdays: buildLocalizeArrayFn(weekdayValues, 'long'),
            month: buildLocalizeFn(monthValues, 'long'),
            months: buildLocalizeArrayFn(monthValues, 'long'),
            timeOfDay: buildLocalizeFn(timeOfDayValues, 'long', (/**
             * @param {?} hours
             * @return {?}
             */
            (hours) => {
                return hours / 12 >= 1 ? 1 : 0;
            })),
            timesOfDay: buildLocalizeArrayFn(timeOfDayValues, 'long')
        });
        this._locale.match = Object.assign({}, this._locale.match, {
            weekdays: buildMatchFn(weekdayValues, 'long'),
            weekday: buildParseFn(weekdayValues, 'long'),
            months: buildMatchFn(monthValues, 'long'),
            month: buildParseFn(monthValues, 'long'),
            timesOfDay: buildMatchFn(timeOfDayMatchValues, 'long'),
            timeOfDay: buildParseFn(timeOfDayMatchValues, 'long')
        });
    }
    /**
     * @private
     * @return {?}
     */
    get _config() {
        return {
            weekStartsOn: this._weekStartsOn,
            locale: this._locale
        };
    }
    /**
     * @param {?} d
     * @param {?} f
     * @return {?}
     */
    format(d, f) {
        return format(d, f, this._config);
    }
    /**
     * @param {?} dS
     * @param {?} f
     * @param {?} bD
     * @return {?}
     */
    parse(dS, f, bD) {
        return parse(dS, this._config);
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    DateFnsParser.prototype._weekStartsOn;
    /**
     * @type {?}
     * @private
     */
    DateFnsParser.prototype._locale;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1mbnMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtZm9tYW50aWMtdWkvIiwic291cmNlcyI6WyJtb2R1bGVzL2RhdGVwaWNrZXIvaGVscGVycy9kYXRlLWZucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsT0FBTyxFQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUMsTUFBTSxVQUFVLENBQUM7QUFDdkMsT0FBTyxLQUFLLGFBQWEsTUFBTSxvQkFBb0IsQ0FBQzs7OztBQUVwRCxtQ0FFQzs7OztBQUVELG9DQUVDOzs7SUFEQyxxQ0FBYTs7Ozs7QUFNZixtQ0FvQkM7OztJQW5CQyx3Q0FPRTs7SUFDRixxQ0FPRTs7SUFDRix1Q0FFRTs7Ozs7Ozs7QUFHSixTQUFTLGVBQWUsQ0FBQyxNQUE0QixFQUM1QixXQUFtQixFQUNuQixhQUE0QztJQUVuRTs7Ozs7SUFBTyxDQUFDLFVBQWtCLEVBQUUsRUFBQyxJQUFJLEVBQUMsR0FBRyxFQUFDLElBQUksRUFBRSxXQUFXLEVBQUMsRUFBRSxFQUFFOztjQUNwRCxLQUFLLEdBQUcsYUFBYSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVU7UUFDcEUsT0FBTyxNQUFNLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2xDLENBQUMsRUFBQztBQUNKLENBQUM7Ozs7OztBQUVELFNBQVMsb0JBQW9CLENBQUMsTUFBNEIsRUFBRSxXQUFtQjtJQUM3RTs7OztJQUFPLENBQUMsRUFBQyxJQUFJLEVBQUMsR0FBRyxFQUFDLElBQUksRUFBRSxXQUFXLEVBQUMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsRUFBQztBQUM3RCxDQUFDOzs7Ozs7QUFFRCxTQUFTLFlBQVksQ0FBQyxRQUE4QixFQUFFLFdBQW1CO0lBQ3ZFOzs7OztJQUFPLENBQUMsV0FBVyxFQUFFLEVBQUMsSUFBSSxFQUFDLEdB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TUFBTSxDQUFDO1lBQ3pDLEtBQUssRUFBRSxZQUFZLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQztZQUN4QyxVQUFVLEVBQUUsWUFBWSxDQUFDLG9CQUFvQixFQUFFLE1BQU0sQ0FBQztZQUN0RCxTQUFTLEVBQUUsWUFBWSxDQUFDLG9CQUFvQixFQUFFLE1BQU0sQ0FBQztTQUN0RCxDQUNGLENBQUM7SUFDSixDQUFDOzs7OztJQUVELElBQVksT0FBTztRQUNqQixPQUFPO1lBQ0wsWUFBWSxFQUFFLElBQUksQ0FBQyxhQUFhO1lBQ2hDLE1BQU0sRUFBRSxJQUFJLENBQUMsT0FBTztTQUNyQixDQUFDO0lBQ0osQ0FBQzs7Ozs7O0lBRU0sTUFBTSxDQUFDLENBQU8sRUFBRSxDQUFTO1FBQzlCLE9BQU8sTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3BDLENBQUM7Ozs7Ozs7SUFFTSxLQUFLLENBQUMsRUFBVSxFQUFFLENBQVMsRUFBRSxFQUFRO1FBQzFDLE9BQU8sS0FBSyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDakMsQ0FBQztDQUNGOzs7Ozs7SUFyRUMsc0NBQTJDOzs7OztJQUMzQyxnQ0FBc0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0lEYXRlcGlja2VyTG9jYWxlVmFsdWVzfSBmcm9tICcuLi8uLi8uLi9iZWhhdmlvcnMvbG9jYWxpemF0aW9uL2ludGVybmFsJztcclxuaW1wb3J0IHtmb3JtYXQsIHBhcnNlfSBmcm9tICdkYXRlLWZucyc7XHJcbmltcG9ydCAqIGFzIGRlZmF1bHRMb2NhbGUgZnJvbSAnZGF0ZS1mbnMvbG9jYWxlL2VuJztcclxuXHJcbmludGVyZmFjZSBJRGF0ZUZuc0xvY2FsZVZhbHVlcyB7XHJcbiAgW25hbWU6IHN0cmluZ106IHN0cmluZ1tdO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSURhdGVGbnNIZWxwZXJPcHRpb25zIHtcclxuICB0eXBlOiBzdHJpbmc7XHJcbn1cclxuXHJcbnR5cGUgRGF0ZUZuc0hlbHBlcjxVLCBUPiA9ICh2YWx1ZTogVSwgb3B0aW9uczogSURhdGVGbnNIZWxwZXJPcHRpb25zKSA9PiBUO1xyXG50eXBlIERhdGVGbnNXZWVrU3RhcnRzT24gPSAwIHwgMSB8IDIgfCAzIHwgNCB8IDUgfCA2O1xyXG5cclxuaW50ZXJmYWNlIElEYXRlRm5zQ3VzdG9tTG9jYWxlIHtcclxuICBsb2NhbGl6ZToge1xyXG4gICAgd2Vla2RheTogRGF0ZUZuc0hlbHBlcjxudW1iZXIsIHN0cmluZz47XHJcbiAgICB3ZWVrZGF5czogRGF0ZUZuc0hlbHBlcjxJRGF0ZUZuc0hlbHBlck9wdGlvbnMsIHN0cmluZ1tdPjtcclxuICAgIG1vbnRoOiBEYXRlRm5zSGVscGVyPG51bWJlciwgc3RyaW5nPjtcclxuICAgIG1vbnRoczogRGF0ZUZuc0hlbHBlcjxJRGF0ZUZuc0hlbHBlck9wdGlvbnMsIHN0cmluZ1tdPjtcclxuICAgIHRpbWVPZkRheTogRGF0ZUZuc0hlbHBlcjxudW1iZXIsIHN0cmluZz47XHJcbiAgICB0aW1lc09mRGF5OiBEYXRlRm5zSGVscGVyPElEYXRlRm5zSGVscGVyT3B0aW9ucywgc3RyaW5nW10+O1xyXG4gIH07XHJcbiAgbWF0Y2g6IHtcclxuICAgIHdlZWtkYXlzOiBEYXRlRm5zSGVscGVyPHN0cmluZywgUmVnRXhwTWF0Y2hBcnJheSB8IG51bGw+O1xyXG4gICAgd2Vla2RheT86IERhdGVGbnNIZWxwZXI8UmVnRXhwTWF0Y2hBcnJheSwgbnVtYmVyPjtcclxuICAgIG1vbnRoczogRGF0ZUZuc0hlbHBlcjxzdHJpbmcsIFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsPjtcclxuICAgIG1vbnRoPzogRGF0ZUZuc0hlbHBlcjxSZWdFeHBNYXRjaEFycmF5LCBudW1iZXI+O1xyXG4gICAgdGltZXNPZkRheTogRGF0ZUZuc0hlbHBlcjxzdHJpbmcsIFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsPjtcclxuICAgIHRpbWVPZkRheT86IERhdGVGbnNIZWxwZXI8UmVnRXhwTWF0Y2hBcnJheSwgbnVtYmVyPjtcclxuICB9O1xyXG4gIG9wdGlvbnM/OiB7XHJcbiAgICB3ZWVrU3RhcnRzT24/OiBudW1iZXI7XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gYnVpbGRMb2NhbGl6ZUZuKHZhbHVlczogSURhdGVGbnNMb2NhbGVWYWx1ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VHlwZTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhDYWxsYmFjaz86IChvbGRJbmRleDogbnVtYmVyKSA9PiBudW1iZXIpOiBEYXRlRm5zSGVscGVyPG51bWJlciwgc3RyaW5nPiB7XHJcblxyXG4gIHJldHVybiAoZGlydHlJbmRleDogbnVtYmVyLCB7dHlwZX0gPSB7dHlwZTogZGVmYXVsdFR5cGV9KSA9PiB7XHJcbiAgICBjb25zdCBpbmRleCA9IGluZGV4Q2FsbGJhY2sgPyBpbmRleENhbGxiYWNrKGRpcnR5SW5kZXgpIDogZGlydHlJbmRleDtcclxuICAgIHJldHVybiB2YWx1ZXNbYCR7dHlwZX1gXVtpbmRleF07XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gYnVpbGRMb2NhbGl6ZUFycmF5Rm4odmFsdWVzOiBJRGF0ZUZuc0xvY2FsZVZhbHVlcywgZGVmYXVsdFR5cGU6IHN0cmluZyk6IERhdGVGbnNIZWxwZXI8SURhdGVGbnNIZWxwZXJPcHRpb25zLCBzdHJpbmdbXT4ge1xyXG4gIHJldHVybiAoe3R5cGV9ID0ge3R5cGU6IGRlZmF1bHRUeXBlfSkgPT4gdmFsdWVzW2Ake3R5cGV9YF07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkTWF0Y2hGbihwYXR0ZXJuczogSURhdGVGbnNMb2NhbGVWYWx1ZXMsIGRlZmF1bHRUeXBlOiBzdHJpbmcpOiBEYXRlRm5zSGVscGVyPHN0cmluZywgUmVnRXhwTWF0Y2hBcnJheSB8IG51bGw+IHtcclxuICByZXR1cm4gKGRpcnR5U3RyaW5nLCB7dHlwZX0gPSB7dHlwZTogZGVmYXVsdFR5cGV9KSA9PlxyXG4gICAgZGlydHlTdHJpbmcubWF0Y2goYF4oJHtwYXR0ZXJuc1tgJHt0eXBlfWBdLmpvaW4oJ3wnKX0pYCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkUGFyc2VGbihwYXR0ZXJuczogSURhdGVGbnNMb2NhbGVWYWx1ZXMsIGRlZmF1bHRUeXBlOiBzdHJpbmcpOiBEYXRlRm5zSGVscGVyPFJlZ0V4cE1hdGNoQXJyYXksIG51bWJlcj4ge1xyXG4gIHJldHVybiAoWywgcmVzdWx0XSwge3R5cGV9ID0ge3R5cGU6IGRlZmF1bHRUeXBlfSkgPT5cclxuICAgIChwYXR0ZXJuc1tgJHt0eXBlfWBdIHx8IHBhdHRlcm5zW2RlZmF1bHRUeXBlXSlcclxuICAgICAgLm1hcChwID0+IG5ldyBSZWdFeHAoYF4ke3B9YCkpXHJcbiAgICAgIC5maW5kSW5kZXgocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QocmVzdWx0KSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEYXRlRm5zUGFyc2VyIHtcclxuICBwcml2YXRlIF93ZWVrU3RhcnRzT246IERhdGVGbnNXZWVrU3RhcnRzT247XHJcbiAgcHJpdmF0ZSBfbG9jYWxlOiBJRGF0ZUZuc0N1c3RvbUxvY2FsZTtcclxuXHJcbiAgY29uc3RydWN0b3IobG9jYWxlOiBJRGF0ZXBpY2tlckxvY2FsZVZhbHVlcykge1xyXG4gICAgdGhpcy5fd2Vla1N0YXJ0c09uID0gbG9jYWxlLmZpcnN0RGF5T2ZXZWVrIGFzIERhdGVGbnNXZWVrU3RhcnRzT247XHJcblxyXG4gICAgY29uc3Qgd2Vla2RheVZhbHVlcyA9IHtcclxuICAgICAgbG9uZzogbG9jYWxlLndlZWtkYXlzLFxyXG4gICAgICBzaG9ydDogbG9jYWxlLndlZWtkYXlzU2hvcnQsXHJcbiAgICAgIG5hcnJvdzogbG9jYWxlLndlZWtkYXlzTmFycm93XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG1vbnRoVmFsdWVzID0ge1xyXG4gICAgICBsb25nOiBsb2NhbGUubW9udGhzLFxyXG4gICAgICBzaG9ydDogbG9jYWxlLm1vbnRoc1Nob3J0XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHRpbWVPZkRheVZhbHVlcyA9IHtcclxuICAgICAgbG9uZzogbG9jYWxlLnRpbWVzT2ZEYXksXHJcbiAgICAgIHVwcGVyY2FzZTogbG9jYWxlLnRpbWVzT2ZEYXlVcHBlcmNhc2UsXHJcbiAgICAgIGxvd2VyY2FzZTogbG9jYWxlLnRpbWVzT2ZEYXlMb3dlcmNhc2VcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdGltZU9mRGF5TWF0Y2hWYWx1ZXMgPSB7XHJcbiAgICAgIGxvbmc6IGxvY2FsZS50aW1lc09mRGF5LFxyXG4gICAgICBzaG9ydDogbG9jYWxlLnRpbWVzT2ZEYXlVcHBlcmNhc2UuY29uY2F0KGxvY2FsZS50aW1lc09mRGF5TG93ZXJjYXNlKVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLl9sb2NhbGUgPSBkZWZhdWx0TG9jYWxlIGFzIGFueTtcclxuICAgIHRoaXMuX2xvY2FsZS5sb2NhbGl6ZSA9IHtcclxuICAgICAgLi4udGhpcy5fbG9jYWxlLmxvY2FsaXplLFxyXG4gICAgICAuLi57XHJcbiAgICAgICAgd2Vla2RheTogYnVpbGRMb2NhbGl6ZUZuKHdlZWtkYXlWYWx1ZXMsICdsb25nJyksXHJcbiAgICAgICAgd2Vla2RheXM6IGJ1aWxkTG9jYWxpemVBcnJheUZuKHdlZWtkYXlWYWx1ZXMsICdsb25nJyksXHJcbiAgICAgICAgbW9udGg6IGJ1aWxkTG9jYWxpemVGbihtb250aFZhbHVlcywgJ2xvbmcnKSxcclxuICAgICAgICBtb250aHM6IGJ1aWxkTG9jYWxpemVBcnJheUZuKG1vbnRoVmFsdWVzLCAnbG9uZycpLFxyXG4gICAgICAgIHRpbWVPZkRheTogYnVpbGRMb2NhbGl6ZUZuKHRpbWVPZkRheVZhbHVlcywgJ2xvbmcnLCAoaG91cnM6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGhvdXJzIC8gMTIgPj0gMSA/IDEgOiAwO1xyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHRpbWVzT2ZEYXk6IGJ1aWxkTG9jYWxpemVBcnJheUZuKHRpbWVPZkRheVZhbHVlcywgJ2xvbmcnKVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5fbG9jYWxlLm1hdGNoID0ge1xyXG4gICAgICAuLi50aGlzLl9sb2NhbGUubWF0Y2gsXHJcbiAgICAgIC4uLntcclxuICAgICAgICB3ZWVrZGF5czogYnVpbGRNYXRjaEZuKHdlZWtkYXlWYWx1ZXMsICdsb25nJyksXHJcbiAgICAgICAgd2Vla2RheTogYnVpbGRQYXJzZUZuKHdlZWtkYXlWYWx1ZXMsICdsb25nJyksXHJcbiAgICAgICAgbW9udGhzOiBidWlsZE1hdGNoRm4obW9udGhWYWx1ZXMsICdsb25nJyksXHJcbiAgICAgICAgbW9udGg6IGJ1aWxkUGFyc2VGbihtb250aFZhbHVlcywgJ2xvbmcnKSxcclxuICAgICAgICB0aW1lc09mRGF5OiBidWlsZE1hdGNoRm4odGltZU9mRGF5TWF0Y2hWYWx1ZXMsICdsb25nJyksXHJcbiAgICAgICAgdGltZU9mRGF5OiBidWlsZFBhcnNlRm4odGltZU9mRGF5TWF0Y2hWYWx1ZXMsICdsb25nJylcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0IF9jb25maWcoKTogYW55IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHdlZWtTdGFydHNPbjogdGhpcy5fd2Vla1N0YXJ0c09uLFxyXG4gICAgICBsb2NhbGU6IHRoaXMuX2xvY2FsZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBmb3JtYXQoZDogRGF0ZSwgZjogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBmb3JtYXQoZCwgZiwgdGhpcy5fY29uZmlnKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwYXJzZShkUzogc3RyaW5nLCBmOiBzdHJpbmcsIGJEOiBEYXRlKTogRGF0ZSB7XHJcbiAgICByZXR1cm4gcGFyc2UoZFMsIHRoaXMuX2NvbmZpZyk7XHJcbiAgfVxyXG59XHJcbiJdfQ==