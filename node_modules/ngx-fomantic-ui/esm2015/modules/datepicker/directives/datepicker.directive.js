/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, ElementRef, EventEmitter, HostListener, Input, Output, Renderer2 } from '@angular/core';
import { CustomValidator, customValidatorFactory, CustomValueAccessor, customValueAccessorFactory, KeyCode, PositioningPlacement, FuiComponentFactory } from '../../../misc/util/internal';
import { FuiLocalizationService } from '../../../behaviors/localization/internal';
import { PopupConfig, PopupTrigger, FuiPopupComponentController } from '../../popup/internal';
import { DatepickerMode, FuiDatepicker } from '../components/datepicker';
import { DateConfig, DatetimeConfig, MonthConfig, TimeConfig, YearConfig } from '../classes/calendar-config';
export class FuiDatepickerDirective extends FuiPopupComponentController {
    /**
     * @param {?} renderer
     * @param {?} element
     * @param {?} componentFactory
     * @param {?} localizationService
     */
    constructor(renderer, element, componentFactory, localizationService) {
        super(renderer, element, componentFactory, FuiDatepicker, new PopupConfig({
            trigger: PopupTrigger.Focus,
            placement: PositioningPlacement.BottomLeft,
            transition: 'scale',
            transitionDuration: 200
        }));
        this.localizationService = localizationService;
        // This ensures the popup is drawn correctly (i.e. no border).
        this._renderer.addClass(this.popup.elementRef.nativeElement, 'ui');
        this._renderer.addClass(this.popup.elementRef.nativeElement, 'calendar');
        this.onLocaleUpdate();
        this.localizationService.onLanguageUpdate.subscribe((/**
         * @return {?}
         */
        () => this.onLocaleUpdate()));
        this.onSelectedDateChange = new EventEmitter();
        this.onValidatorChange = new EventEmitter();
        this.mode = DatepickerMode.Datetime;
    }
    /**
     * @param {?} placement
     * @return {?}
     */
    set placement(placement) {
        this.popup.config.placement = placement;
    }
    /**
     * @param {?} transition
     * @return {?}
     */
    set transition(transition) {
        this.popup.config.transition = transition;
    }
    /**
     * @param {?} duration
     * @return {?}
     */
    set transitionDuration(duration) {
        this.popup.config.transitionDuration = duration;
    }
    /**
     * @return {?}
     */
    get selectedDate() {
        return this._selectedDate;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    set selectedDate(date) {
        this._selectedDate = date;
        this.onSelectedDateChange.emit(date);
    }
    /**
     * @return {?}
     */
    get mode() {
        return this._mode;
    }
    /**
     * @param {?} mode
     * @return {?}
     */
    set mode(mode) {
        this._mode = mode || DatepickerMode.Datetime;
        switch (this._mode) {
            case DatepickerMode.Year:
                this.config = new YearConfig();
                break;
            case DatepickerMode.Month:
                this.config = new MonthConfig();
                break;
            case DatepickerMode.Date:
            default:
                this.config = new DateConfig();
                break;
            case DatepickerMode.Datetime:
                this.config = new DatetimeConfig();
                break;
            case DatepickerMode.Time:
                this.config = new TimeConfig();
                break;
        }
        this.writeValue(this.selectedDate);
    }
    /**
     * @return {?}
     */
    get localeValues() {
        return this.localizationService.override(this._localeValues, this.localeOverrides);
    }
    /**
     * @return {?}
     */
    popupOnOpen() {
        if (this.componentInstance) {
            this.componentInstance.service.config = this.config;
            this.componentInstance.service.localeValues = this.localeValues;
            this.componentInstance.service.currentDate = this.initialDate || new Date();
            this.componentInstance.service.selectedDate = this.selectedDate;
            this.componentInstance.service.maxDate = this.maxDate;
            this.componentInstance.service.minDate = this.minDate;
            if (this.firstDayOfWeek != undefined) {
                this.componentInstance.service.firstDayOfWeek = this.firstDayOfWeek;
            }
            this.componentInstance.service.reset();
            this.componentInstance.service.onDateChange.subscribe((/**
             * @param {?} d
             * @return {?}
             */
            (d) => {
                this.selectedDate = d;
                this.close();
            }));
        }
    }
    /**
     * @param {?} __0
     * @return {?}
     */
    ngOnChanges({ maxDate, minDate, mode }) {
        if (maxDate || minDate || mode) {
            this.onValidatorChange.emit();
        }
    }
    /**
     * @param {?} c
     * @return {?}
     */
    validate(c) {
        /** @type {?} */
        const value = c.value;
        if (value != undefined) {
            // We post process the min & max date because sometimes this puts the date outside of the allowed range.
            if (this.minDate && value < this.minDate) {
                return { fuiMinDate: { required: this.minDate, actual: value } };
            }
            if (this.maxDate && value > this.maxDate) {
                return { fuiMaxDate: { required: this.maxDate, actual: value } };
            }
        }
        // Angular expects null
        // tslint:disable-next-line:no-null-keyword
        return null;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    writeValue(value) {
        this.selectedDate = value;
        if (this.componentInstance) {
            this.componentInstance.service.selectedDate = value;
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onKeyDown(e) {
        if (e.keyCode === KeyCode.Escape) {
            this.close();
        }
    }
    /**
     * @private
     * @return {?}
     */
    onLocaleUpdate() {
        this._localeValues = this.localizationService.get().datepicker;
    }
}
FuiDatepickerDirective.decorators = [
    { type: Directive, args: [{
                selector: '[fuiDatepicker]',
                providers: [customValidatorFactory(FuiDatepickerDirective)]
            },] }
];
/** @nocollapse */
FuiDatepickerDirective.ctorParameters = () => [
    { type: Renderer2 },
    { type: ElementRef },
    { type: FuiComponentFactory },
    { type: FuiLocalizationService }
];
FuiDatepickerDirective.propDecorators = {
    initialDate: [{ type: Input, args: ['pickerInitialDate',] }],
    maxDate: [{ type: Input, args: ['pickerMaxDate',] }],
    minDate: [{ type: Input, args: ['pickerMinDate',] }],
    firstDayOfWeek: [{ type: Input, args: ['pickerFirstDayOfWeek',] }],
    localeOverrides: [{ type: Input, args: ['pickerLocaleOverrides',] }],
    onSelectedDateChange: [{ type: Output, args: ['pickerSelectedDateChange',] }],
    onValidatorChange: [{ type: Output, args: ['pickerValidatorChange',] }],
    placement: [{ type: Input, args: ['pickerPlacement',] }],
    transition: [{ type: Input, args: ['pickerTransition',] }],
    transitionDuration: [{ type: Input, args: ['pickerTransitionDuration',] }],
    mode: [{ type: Input, args: ['pickerMode',] }],
    onKeyDown: [{ type: HostListener, args: ['keydown', ['$event'],] }]
};
if (false) {
    /** @type {?} */
    FuiDatepickerDirective.prototype.config;
    /** @type {?} */
    FuiDatepickerDirective.prototype.initialDate;
    /** @type {?} */
    FuiDatepickerDirective.prototype.maxDate;
    /** @type {?} */
    FuiDatepickerDirective.prototype.minDate;
    /** @type {?} */
    FuiDatepickerDirective.prototype.firstDayOfWeek;
    /** @type {?} */
    FuiDatepickerDirective.prototype.localeOverrides;
    /** @type {?} */
    FuiDatepickerDirective.prototype.onSelectedDateChange;
    /** @type {?} */
    FuiDatepickerDirective.prototype.onValidatorChange;
    /**
     * @type {?}
     * @private
     */
    FuiDatepickerDirective.prototype._selectedDate;
    /**
     * @type {?}
     * @private
     */
    FuiDatepickerDirective.prototype._mode;
    /**
     * @type {?}
     * @private
     */
    FuiDatepickerDirective.prototype._localeValues;
    /** @type {?} */
    FuiDatepickerDirective.prototype.localizationService;
}
export class FuiDatepickerDirectiveValueAccessor extends CustomValueAccessor {
    /**
     * @param {?} host
     */
    constructor(host) {
        super(host);
        this.host = host;
    }
}
FuiDatepickerDirectiveValueAccessor.decorators = [
    { type: Directive, args: [{
                selector: '[fuiDatepicker]',
                host: { '(pickerSelectedDateChange)': 'onChange($event)' },
                providers: [customValueAccessorFactory(FuiDatepickerDirectiveValueAccessor)]
            },] }
];
/** @nocollapse */
FuiDatepickerDirectiveValueAccessor.ctorParameters = () => [
    { type: FuiDatepickerDirective }
];
if (false) {
    /** @type {?} */
    FuiDatepickerDirectiveValueAccessor.prototype.host;
}
export class FuiDatepickerDirectiveValidator extends CustomValidator {
    /**
     * @param {?} host
     */
    constructor(host) {
        super(host);
        this.host = host;
    }
}
FuiDatepickerDirectiveValidator.decorators = [
    { type: Directive, args: [{
                selector: '[fuiDatepicker]',
                host: { '(pickerValidatorChange)': 'onValidatorChange()' },
                providers: [customValidatorFactory(FuiDatepickerDirectiveValidator)]
            },] }
];
/** @nocollapse */
FuiDatepickerDirectiveValidator.ctorParameters = () => [
    { type: FuiDatepickerDirective }
];
if (false) {
    /** @type {?} */
    FuiDatepickerDirectiveValidator.prototype.host;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZXBpY2tlci5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtZm9tYW50aWMtdWkvIiwic291cmNlcyI6WyJtb2R1bGVzL2RhdGVwaWNrZXIvZGlyZWN0aXZlcy9kYXRlcGlja2VyLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQWEsTUFBTSxFQUFFLFNBQVMsRUFBZ0IsTUFBTSxlQUFlLENBQUM7QUFFcEksT0FBTyxFQUNMLGVBQWUsRUFDZixzQkFBc0IsRUFDdEIsbUJBQW1CLEVBQ25CLDBCQUEwQixFQUcxQixPQUFPLEVBQ1Asb0JBQW9CLEVBQ3BCLG1CQUFtQixFQUNwQixNQUFNLDZCQUE2QixDQUFDO0FBQ3JDLE9BQU8sRUFBNEMsc0JBQXNCLEVBQUMsTUFBTSwwQ0FBMEMsQ0FBQztBQUMzSCxPQUFPLEVBQWlCLFdBQVcsRUFBRSxZQUFZLEVBQUUsMkJBQTJCLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQztBQUM1RyxPQUFPLEVBQUMsY0FBYyxFQUFFLGFBQWEsRUFBQyxNQUFNLDBCQUEwQixDQUFDO0FBQ3ZFLE9BQU8sRUFBaUIsVUFBVSxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBQyxNQUFNLDRCQUE0QixDQUFDO0FBTTNILE1BQU0sT0FBTyxzQkFDWCxTQUFRLDJCQUEwQzs7Ozs7OztJQW1CbEQsWUFBWSxRQUFtQixFQUNuQixPQUFtQixFQUNuQixnQkFBcUMsRUFDOUIsbUJBQTJDO1FBRTVELEtBQUssQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGFBQWEsRUFBRSxJQUFJLFdBQVcsQ0FBQztZQUN4RSxPQUFPLEVBQUUsWUFBWSxDQUFDLEtBQUs7WUFDM0IsU0FBUyxFQUFFLG9CQUFvQixDQUFDLFVBQVU7WUFDMUMsVUFBVSxFQUFFLE9BQU87WUFDbkIsa0JBQWtCLEVBQUUsR0FBRztTQUN4QixDQUFDLENBQUMsQ0FBQztRQVBhLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBd0I7UUFTNUQsOERBQThEO1FBQzlELElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxhQUFhLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFFekUsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTOzs7UUFBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLEVBQUMsQ0FBQztRQUVqRixJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxZQUFZLEVBQVEsQ0FBQztRQUNyRCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxZQUFZLEVBQVEsQ0FBQztRQUVsRCxJQUFJLENBQUMsSUFBSSxHQUFHLGNBQWMsQ0FBQyxRQUFRLENBQUM7SUFDdEMsQ0FBQzs7Ozs7SUFFRCxJQUNXLFNBQVMsQ0FBQyxTQUErQjtRQUNsRCxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQzFDLENBQUM7Ozs7O0lBRUQsSUFDVyxVQUFVLENBQUMsVUFBa0I7UUFDdEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztJQUM1QyxDQUFDOzs7OztJQUVELElBQ1csa0JBQWtCLENBQUMsUUFBZ0I7UUFDNUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsa0JBQWtCLEdBQUcsUUFBUSxDQUFDO0lBQ2xELENBQUM7Ozs7SUFJRCxJQUFXLFlBQVk7UUFDckIsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzVCLENBQUM7Ozs7O0lBRUQsSUFBVyxZQUFZLENBQUMsSUFBc0I7UUFDNUMsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7UUFDMUIsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN2QyxDQUFDOzs7O0lBSUQsSUFDVyxJQUFJO1FBQ2IsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7Ozs7O0lBRUQsSUFBVyxJQUFJLENBQUMsSUFBb0I7UUFDbEMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksY0FBYyxDQUFDLFFBQVEsQ0FBQztRQUM3QyxRQUFRLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDbEIsS0FBSyxjQUFjLENBQUMsSUFBSTtnQkFDdEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO2dCQUMvQixNQUFNO1lBQ1IsS0FBSyxjQUFjLENBQUMsS0FBSztnQkFDdkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDO2dCQUNoQyxNQUFNO1lBQ1IsS0FBSyxjQUFjLENBQUMsSUFBSSxDQUFDO1lBQ3pCO2dCQUNFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxVQUFVLEVBQUUsQ0FBQztnQkFDL0IsTUFBTTtZQUNSLEtBQUssY0FBYyxDQUFDLFFBQVE7Z0JBQzFCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxjQUFjLEVBQUUsQ0FBQztnQkFDbkMsTUFBTTtZQUNSLEtBQUssY0FBYyxDQUFDLElBQUk7Z0JBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxVQUFVLEVBQUUsQ0FBQztnQkFDL0IsTUFBTTtTQUNUO1FBQ0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDckMsQ0FBQzs7OztJQUlELElBQVcsWUFBWTtRQUNyQixPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQWUsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDbkcsQ0FBQzs7OztJQUVNLFdBQVc7UUFDaEIsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUNwRCxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQ2hFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUM1RSxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQ2hFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDdEQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUV0RCxJQUFJLElBQUksQ0FBQyxjQUFjLElBQUksU0FBUyxFQUFFO2dCQUNwQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO2FBQ3JFO1lBRUQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUV2QyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxTQUFTOzs7O1lBQUMsQ0FBQyxDQUFPLEVBQUUsRUFBRTtnQkFDaEUsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7Z0JBQ3RCLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNmLENBQUMsRUFBQyxDQUFDO1NBQ0o7SUFDSCxDQUFDOzs7OztJQUVNLFdBQVcsQ0FBQyxFQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFnQjtRQUN4RCxJQUFJLE9BQU8sSUFBSSxPQUFPLElBQUksSUFBSSxFQUFFO1lBQzlCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUMvQjtJQUNILENBQUM7Ozs7O0lBRU0sUUFBUSxDQUFDLENBQWtCOztjQUMxQixLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUs7UUFFckIsSUFBSSxLQUFLLElBQUksU0FBUyxFQUFFO1lBQ3RCLHdHQUF3RztZQUN4RyxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUU7Z0JBQ3hDLE9BQU8sRUFBQyxVQUFVLEVBQUUsRUFBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFDLEVBQUMsQ0FBQzthQUM5RDtZQUVELElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRTtnQkFDeEMsT0FBTyxFQUFDLFVBQVUsRUFBRSxFQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBQyxDQUFDO2FBQzlEO1NBQ0Y7UUFFRCx1QkFBdUI7UUFDdkIsMkNBQTJDO1FBQzNDLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQzs7Ozs7SUFFTSxVQUFVLENBQUMsS0FBdUI7UUFDdkMsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7UUFFMUIsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1NBQ3JEO0lBQ0gsQ0FBQzs7Ozs7SUFHTSxTQUFTLENBQUMsQ0FBZ0I7UUFDL0IsSUFBSSxDQUFDLENBQUMsT0FBTyxLQUFLLE9BQU8sQ0FBQyxNQUFNLEVBQUU7WUFDaEMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ2Q7SUFDSCxDQUFDOzs7OztJQUVPLGNBQWM7UUFDcEIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDO0lBQ2pFLENBQUM7OztZQS9LRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLGlCQUFpQjtnQkFDM0IsU0FBUyxFQUFFLENBQUMsc0JBQXNCLENBQUMsc0JBQXNCLENBQUMsQ0FBQzthQUM1RDs7OztZQXJCb0YsU0FBUztZQUEzRSxVQUFVO1lBVzNCLG1CQUFtQjtZQUU4QixzQkFBc0I7OzswQkFjdEUsS0FBSyxTQUFDLG1CQUFtQjtzQkFFekIsS0FBSyxTQUFDLGVBQWU7c0JBRXJCLEtBQUssU0FBQyxlQUFlOzZCQUVyQixLQUFLLFNBQUMsc0JBQXNCOzhCQUU1QixLQUFLLFNBQUMsdUJBQXVCO21DQUU3QixNQUFNLFNBQUMsMEJBQTBCO2dDQUVqQyxNQUFNLFNBQUMsdUJBQXVCO3dCQTRCOUIsS0FBSyxTQUFDLGlCQUFpQjt5QkFLdkIsS0FBSyxTQUFDLGtCQUFrQjtpQ0FLeEIsS0FBSyxTQUFDLDBCQUEwQjttQkFrQmhDLEtBQUssU0FBQyxZQUFZO3dCQXlGbEIsWUFBWSxTQUFDLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQzs7OztJQTlKbkMsd0NBQThCOztJQUM5Qiw2Q0FDMEI7O0lBQzFCLHlDQUNzQjs7SUFDdEIseUNBQ3NCOztJQUN0QixnREFDK0I7O0lBQy9CLGlEQUNrRTs7SUFDbEUsc0RBQ2dEOztJQUNoRCxtREFDNkM7Ozs7O0lBMEM3QywrQ0FBNkI7Ozs7O0lBVzdCLHVDQUE4Qjs7Ozs7SUE4QjlCLCtDQUErQzs7SUE5RW5DLHFEQUFrRDs7QUE0SmhFLE1BQU0sT0FBTyxtQ0FBb0MsU0FBUSxtQkFBaUQ7Ozs7SUFDeEcsWUFBbUIsSUFBNEI7UUFDN0MsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBREssU0FBSSxHQUFKLElBQUksQ0FBd0I7SUFFL0MsQ0FBQzs7O1lBUkYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxpQkFBaUI7Z0JBQzNCLElBQUksRUFBRSxFQUFDLDRCQUE0QixFQUFFLGtCQUFrQixFQUFDO2dCQUN4RCxTQUFTLEVBQUUsQ0FBQywwQkFBMEIsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO2FBQzdFOzs7O1lBRTBCLHNCQUFzQjs7OztJQUFuQyxtREFBbUM7O0FBVWpELE1BQU0sT0FBTywrQkFBZ0MsU0FBUSxlQUF1Qzs7OztJQUMxRixZQUFtQixJQUE0QjtRQUM3QyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFESyxTQUFJLEdBQUosSUFBSSxDQUF3QjtJQUUvQyxDQUFDOzs7WUFSRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLGlCQUFpQjtnQkFDM0IsSUFBSSxFQUFFLEVBQUMseUJBQXlCLEVBQUUscUJBQXFCLEVBQUM7Z0JBQ3hELFNBQVMsRUFBRSxDQUFDLHNCQUFzQixDQUFDLCtCQUErQixDQUFDLENBQUM7YUFDckU7Ozs7WUFFMEIsc0JBQXNCOzs7O0lBQW5DLCtDQUFtQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RGlyZWN0aXZlLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEhvc3RMaXN0ZW5lciwgSW5wdXQsIE9uQ2hhbmdlcywgT3V0cHV0LCBSZW5kZXJlcjIsIFNpbXBsZUNoYW5nZXN9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge0Fic3RyYWN0Q29udHJvbCwgVmFsaWRhdGlvbkVycm9yc30gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQge1xyXG4gIEN1c3RvbVZhbGlkYXRvcixcclxuICBjdXN0b21WYWxpZGF0b3JGYWN0b3J5LFxyXG4gIEN1c3RvbVZhbHVlQWNjZXNzb3IsXHJcbiAgY3VzdG9tVmFsdWVBY2Nlc3NvckZhY3RvcnksXHJcbiAgSUN1c3RvbVZhbGlkYXRvckhvc3QsXHJcbiAgSUN1c3RvbVZhbHVlQWNjZXNzb3JIb3N0LFxyXG4gIEtleUNvZGUsXHJcbiAgUG9zaXRpb25pbmdQbGFjZW1lbnQsXHJcbiAgRnVpQ29tcG9uZW50RmFjdG9yeVxyXG59IGZyb20gJy4uLy4uLy4uL21pc2MvdXRpbC9pbnRlcm5hbCc7XHJcbmltcG9ydCB7SURhdGVwaWNrZXJMb2NhbGVWYWx1ZXMsIFJlY3Vyc2l2ZVBhcnRpYWwsIEZ1aUxvY2FsaXphdGlvblNlcnZpY2V9IGZyb20gJy4uLy4uLy4uL2JlaGF2aW9ycy9sb2NhbGl6YXRpb24vaW50ZXJuYWwnO1xyXG5pbXBvcnQge1BvcHVwQWZ0ZXJPcGVuLCBQb3B1cENvbmZpZywgUG9wdXBUcmlnZ2VyLCBGdWlQb3B1cENvbXBvbmVudENvbnRyb2xsZXJ9IGZyb20gJy4uLy4uL3BvcHVwL2ludGVybmFsJztcclxuaW1wb3J0IHtEYXRlcGlja2VyTW9kZSwgRnVpRGF0ZXBpY2tlcn0gZnJvbSAnLi4vY29tcG9uZW50cy9kYXRlcGlja2VyJztcclxuaW1wb3J0IHtDYWxlbmRhckNvbmZpZywgRGF0ZUNvbmZpZywgRGF0ZXRpbWVDb25maWcsIE1vbnRoQ29uZmlnLCBUaW1lQ29uZmlnLCBZZWFyQ29uZmlnfSBmcm9tICcuLi9jbGFzc2VzL2NhbGVuZGFyLWNvbmZpZyc7XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ1tmdWlEYXRlcGlja2VyXScsXHJcbiAgcHJvdmlkZXJzOiBbY3VzdG9tVmFsaWRhdG9yRmFjdG9yeShGdWlEYXRlcGlja2VyRGlyZWN0aXZlKV1cclxufSlcclxuZXhwb3J0IGNsYXNzIEZ1aURhdGVwaWNrZXJEaXJlY3RpdmVcclxuICBleHRlbmRzIEZ1aVBvcHVwQ29tcG9uZW50Q29udHJvbGxlcjxGdWlEYXRlcGlja2VyPlxyXG4gIGltcGxlbWVudHMgSUN1c3RvbVZhbHVlQWNjZXNzb3JIb3N0PERhdGU+LCBJQ3VzdG9tVmFsaWRhdG9ySG9zdCwgT25DaGFuZ2VzLCBQb3B1cEFmdGVyT3BlbiB7XHJcblxyXG4gIHB1YmxpYyBjb25maWc6IENhbGVuZGFyQ29uZmlnO1xyXG4gIEBJbnB1dCgncGlja2VySW5pdGlhbERhdGUnKVxyXG4gIHB1YmxpYyBpbml0aWFsRGF0ZT86IERhdGU7XHJcbiAgQElucHV0KCdwaWNrZXJNYXhEYXRlJylcclxuICBwdWJsaWMgbWF4RGF0ZT86IERhdGU7XHJcbiAgQElucHV0KCdwaWNrZXJNaW5EYXRlJylcclxuICBwdWJsaWMgbWluRGF0ZT86IERhdGU7XHJcbiAgQElucHV0KCdwaWNrZXJGaXJzdERheU9mV2VlaycpXHJcbiAgcHVibGljIGZpcnN0RGF5T2ZXZWVrPzogbnVtYmVyO1xyXG4gIEBJbnB1dCgncGlja2VyTG9jYWxlT3ZlcnJpZGVzJylcclxuICBwdWJsaWMgbG9jYWxlT3ZlcnJpZGVzOiBSZWN1cnNpdmVQYXJ0aWFsPElEYXRlcGlja2VyTG9jYWxlVmFsdWVzPjtcclxuICBAT3V0cHV0KCdwaWNrZXJTZWxlY3RlZERhdGVDaGFuZ2UnKVxyXG4gIHB1YmxpYyBvblNlbGVjdGVkRGF0ZUNoYW5nZTogRXZlbnRFbWl0dGVyPERhdGU+O1xyXG4gIEBPdXRwdXQoJ3BpY2tlclZhbGlkYXRvckNoYW5nZScpXHJcbiAgcHVibGljIG9uVmFsaWRhdG9yQ2hhbmdlOiBFdmVudEVtaXR0ZXI8dm9pZD47XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgICAgICAgZWxlbWVudDogRWxlbWVudFJlZixcclxuICAgICAgICAgICAgICBjb21wb25lbnRGYWN0b3J5OiBGdWlDb21wb25lbnRGYWN0b3J5LFxyXG4gICAgICAgICAgICAgIHB1YmxpYyBsb2NhbGl6YXRpb25TZXJ2aWNlOiBGdWlMb2NhbGl6YXRpb25TZXJ2aWNlKSB7XHJcblxyXG4gICAgc3VwZXIocmVuZGVyZXIsIGVsZW1lbnQsIGNvbXBvbmVudEZhY3RvcnksIEZ1aURhdGVwaWNrZXIsIG5ldyBQb3B1cENvbmZpZyh7XHJcbiAgICAgIHRyaWdnZXI6IFBvcHVwVHJpZ2dlci5Gb2N1cyxcclxuICAgICAgcGxhY2VtZW50OiBQb3NpdGlvbmluZ1BsYWNlbWVudC5Cb3R0b21MZWZ0LFxyXG4gICAgICB0cmFuc2l0aW9uOiAnc2NhbGUnLFxyXG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb246IDIwMFxyXG4gICAgfSkpO1xyXG5cclxuICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgcG9wdXAgaXMgZHJhd24gY29ycmVjdGx5IChpLmUuIG5vIGJvcmRlcikuXHJcbiAgICB0aGlzLl9yZW5kZXJlci5hZGRDbGFzcyh0aGlzLnBvcHVwLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ3VpJyk7XHJcbiAgICB0aGlzLl9yZW5kZXJlci5hZGRDbGFzcyh0aGlzLnBvcHVwLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ2NhbGVuZGFyJyk7XHJcblxyXG4gICAgdGhpcy5vbkxvY2FsZVVwZGF0ZSgpO1xyXG4gICAgdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlLm9uTGFuZ3VhZ2VVcGRhdGUuc3Vic2NyaWJlKCgpID0+IHRoaXMub25Mb2NhbGVVcGRhdGUoKSk7XHJcblxyXG4gICAgdGhpcy5vblNlbGVjdGVkRGF0ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8RGF0ZT4oKTtcclxuICAgIHRoaXMub25WYWxpZGF0b3JDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcblxyXG4gICAgdGhpcy5tb2RlID0gRGF0ZXBpY2tlck1vZGUuRGF0ZXRpbWU7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoJ3BpY2tlclBsYWNlbWVudCcpXHJcbiAgcHVibGljIHNldCBwbGFjZW1lbnQocGxhY2VtZW50OiBQb3NpdGlvbmluZ1BsYWNlbWVudCkge1xyXG4gICAgdGhpcy5wb3B1cC5jb25maWcucGxhY2VtZW50ID0gcGxhY2VtZW50O1xyXG4gIH1cclxuXHJcbiAgQElucHV0KCdwaWNrZXJUcmFuc2l0aW9uJylcclxuICBwdWJsaWMgc2V0IHRyYW5zaXRpb24odHJhbnNpdGlvbjogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnBvcHVwLmNvbmZpZy50cmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcclxuICB9XHJcblxyXG4gIEBJbnB1dCgncGlja2VyVHJhbnNpdGlvbkR1cmF0aW9uJylcclxuICBwdWJsaWMgc2V0IHRyYW5zaXRpb25EdXJhdGlvbihkdXJhdGlvbjogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnBvcHVwLmNvbmZpZy50cmFuc2l0aW9uRHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX3NlbGVjdGVkRGF0ZT86IERhdGU7XHJcblxyXG4gIHB1YmxpYyBnZXQgc2VsZWN0ZWREYXRlKCk6IERhdGUgfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkRGF0ZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgc2VsZWN0ZWREYXRlKGRhdGU6IERhdGUgfCB1bmRlZmluZWQpIHtcclxuICAgIHRoaXMuX3NlbGVjdGVkRGF0ZSA9IGRhdGU7XHJcbiAgICB0aGlzLm9uU2VsZWN0ZWREYXRlQ2hhbmdlLmVtaXQoZGF0ZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9tb2RlOiBEYXRlcGlja2VyTW9kZTtcclxuXHJcbiAgQElucHV0KCdwaWNrZXJNb2RlJylcclxuICBwdWJsaWMgZ2V0IG1vZGUoKTogRGF0ZXBpY2tlck1vZGUge1xyXG4gICAgcmV0dXJuIHRoaXMuX21vZGU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IG1vZGUobW9kZTogRGF0ZXBpY2tlck1vZGUpIHtcclxuICAgIHRoaXMuX21vZGUgPSBtb2RlIHx8IERhdGVwaWNrZXJNb2RlLkRhdGV0aW1lO1xyXG4gICAgc3dpdGNoICh0aGlzLl9tb2RlKSB7XHJcbiAgICAgIGNhc2UgRGF0ZXBpY2tlck1vZGUuWWVhcjpcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IG5ldyBZZWFyQ29uZmlnKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgRGF0ZXBpY2tlck1vZGUuTW9udGg6XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBuZXcgTW9udGhDb25maWcoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBEYXRlcGlja2VyTW9kZS5EYXRlOlxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRoaXMuY29uZmlnID0gbmV3IERhdGVDb25maWcoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBEYXRlcGlja2VyTW9kZS5EYXRldGltZTpcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IG5ldyBEYXRldGltZUNvbmZpZygpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIERhdGVwaWNrZXJNb2RlLlRpbWU6XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBuZXcgVGltZUNvbmZpZygpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhpcy53cml0ZVZhbHVlKHRoaXMuc2VsZWN0ZWREYXRlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2xvY2FsZVZhbHVlczogSURhdGVwaWNrZXJMb2NhbGVWYWx1ZXM7XHJcblxyXG4gIHB1YmxpYyBnZXQgbG9jYWxlVmFsdWVzKCk6IElEYXRlcGlja2VyTG9jYWxlVmFsdWVzIHtcclxuICAgIHJldHVybiB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2Uub3ZlcnJpZGU8J2RhdGVwaWNrZXInPih0aGlzLl9sb2NhbGVWYWx1ZXMsIHRoaXMubG9jYWxlT3ZlcnJpZGVzKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwb3B1cE9uT3BlbigpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmNvbXBvbmVudEluc3RhbmNlKSB7XHJcbiAgICAgIHRoaXMuY29tcG9uZW50SW5zdGFuY2Uuc2VydmljZS5jb25maWcgPSB0aGlzLmNvbmZpZztcclxuICAgICAgdGhpcy5jb21wb25lbnRJbnN0YW5jZS5zZXJ2aWNlLmxvY2FsZVZhbHVlcyA9IHRoaXMubG9jYWxlVmFsdWVzO1xyXG4gICAgICB0aGlzLmNvbXBvbmVudEluc3RhbmNlLnNlcnZpY2UuY3VycmVudERhdGUgPSB0aGlzLmluaXRpYWxEYXRlIHx8IG5ldyBEYXRlKCk7XHJcbiAgICAgIHRoaXMuY29tcG9uZW50SW5zdGFuY2Uuc2VydmljZS5zZWxlY3RlZERhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZTtcclxuICAgICAgdGhpcy5jb21wb25lbnRJbnN0YW5jZS5zZXJ2aWNlLm1heERhdGUgPSB0aGlzLm1heERhdGU7XHJcbiAgICAgIHRoaXMuY29tcG9uZW50SW5zdGFuY2Uuc2VydmljZS5taW5EYXRlID0gdGhpcy5taW5EYXRlO1xyXG5cclxuICAgICAgaWYgKHRoaXMuZmlyc3REYXlPZldlZWsgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJbnN0YW5jZS5zZXJ2aWNlLmZpcnN0RGF5T2ZXZWVrID0gdGhpcy5maXJzdERheU9mV2VlaztcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5jb21wb25lbnRJbnN0YW5jZS5zZXJ2aWNlLnJlc2V0KCk7XHJcblxyXG4gICAgICB0aGlzLmNvbXBvbmVudEluc3RhbmNlLnNlcnZpY2Uub25EYXRlQ2hhbmdlLnN1YnNjcmliZSgoZDogRGF0ZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gZDtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIG5nT25DaGFuZ2VzKHttYXhEYXRlLCBtaW5EYXRlLCBtb2RlfTogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgaWYgKG1heERhdGUgfHwgbWluRGF0ZSB8fCBtb2RlKSB7XHJcbiAgICAgIHRoaXMub25WYWxpZGF0b3JDaGFuZ2UuZW1pdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHZhbGlkYXRlKGM6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMgfCBudWxsIHtcclxuICAgIGNvbnN0IHZhbHVlID0gYy52YWx1ZTtcclxuXHJcbiAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIC8vIFdlIHBvc3QgcHJvY2VzcyB0aGUgbWluICYgbWF4IGRhdGUgYmVjYXVzZSBzb21ldGltZXMgdGhpcyBwdXRzIHRoZSBkYXRlIG91dHNpZGUgb2YgdGhlIGFsbG93ZWQgcmFuZ2UuXHJcbiAgICAgIGlmICh0aGlzLm1pbkRhdGUgJiYgdmFsdWUgPCB0aGlzLm1pbkRhdGUpIHtcclxuICAgICAgICByZXR1cm4ge2Z1aU1pbkRhdGU6IHtyZXF1aXJlZDogdGhpcy5taW5EYXRlLCBhY3R1YWw6IHZhbHVlfX07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLm1heERhdGUgJiYgdmFsdWUgPiB0aGlzLm1heERhdGUpIHtcclxuICAgICAgICByZXR1cm4ge2Z1aU1heERhdGU6IHtyZXF1aXJlZDogdGhpcy5tYXhEYXRlLCBhY3R1YWw6IHZhbHVlfX07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBBbmd1bGFyIGV4cGVjdHMgbnVsbFxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLW51bGwta2V5d29yZFxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgd3JpdGVWYWx1ZSh2YWx1ZTogRGF0ZSB8IHVuZGVmaW5lZCk6IHZvaWQge1xyXG4gICAgdGhpcy5zZWxlY3RlZERhdGUgPSB2YWx1ZTtcclxuXHJcbiAgICBpZiAodGhpcy5jb21wb25lbnRJbnN0YW5jZSkge1xyXG4gICAgICB0aGlzLmNvbXBvbmVudEluc3RhbmNlLnNlcnZpY2Uuc2VsZWN0ZWREYXRlID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCdrZXlkb3duJywgWyckZXZlbnQnXSlcclxuICBwdWJsaWMgb25LZXlEb3duKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgIGlmIChlLmtleUNvZGUgPT09IEtleUNvZGUuRXNjYXBlKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25Mb2NhbGVVcGRhdGUoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9sb2NhbGVWYWx1ZXMgPSB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UuZ2V0KCkuZGF0ZXBpY2tlcjtcclxuICB9XHJcbn1cclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gIHNlbGVjdG9yOiAnW2Z1aURhdGVwaWNrZXJdJyxcclxuICBob3N0OiB7JyhwaWNrZXJTZWxlY3RlZERhdGVDaGFuZ2UpJzogJ29uQ2hhbmdlKCRldmVudCknfSxcclxuICBwcm92aWRlcnM6IFtjdXN0b21WYWx1ZUFjY2Vzc29yRmFjdG9yeShGdWlEYXRlcGlja2VyRGlyZWN0aXZlVmFsdWVBY2Nlc3NvcildXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGdWlEYXRlcGlja2VyRGlyZWN0aXZlVmFsdWVBY2Nlc3NvciBleHRlbmRzIEN1c3RvbVZhbHVlQWNjZXNzb3I8RGF0ZSwgRnVpRGF0ZXBpY2tlckRpcmVjdGl2ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBob3N0OiBGdWlEYXRlcGlja2VyRGlyZWN0aXZlKSB7XHJcbiAgICBzdXBlcihob3N0KTtcclxuICB9XHJcbn1cclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gIHNlbGVjdG9yOiAnW2Z1aURhdGVwaWNrZXJdJyxcclxuICBob3N0OiB7JyhwaWNrZXJWYWxpZGF0b3JDaGFuZ2UpJzogJ29uVmFsaWRhdG9yQ2hhbmdlKCknfSxcclxuICBwcm92aWRlcnM6IFtjdXN0b21WYWxpZGF0b3JGYWN0b3J5KEZ1aURhdGVwaWNrZXJEaXJlY3RpdmVWYWxpZGF0b3IpXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRnVpRGF0ZXBpY2tlckRpcmVjdGl2ZVZhbGlkYXRvciBleHRlbmRzIEN1c3RvbVZhbGlkYXRvcjxGdWlEYXRlcGlja2VyRGlyZWN0aXZlPiB7XHJcbiAgY29uc3RydWN0b3IocHVibGljIGhvc3Q6IEZ1aURhdGVwaWNrZXJEaXJlY3RpdmUpIHtcclxuICAgIHN1cGVyKGhvc3QpO1xyXG4gIH1cclxufVxyXG4iXX0=