(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{ypLv:function(e,t,n){"use strict";n.r(t),n.d(t,"TransactionModule",(function(){return j}));var i=n("ofXK"),c=n("tyNb"),o=n("un/a"),s=n("BapT"),r=n("+0XT"),a=n("PSD3"),d=n.n(a),l=n("5RHE"),g=n("wOnQ"),p=n.n(g),h=n("wd/R"),u=n("fXoL"),v=n("gcxx"),m=n("AXpb"),f=n("QnqH"),b=n("tk/3"),y=n("jzuh");let w=(()=>{class e{constructor(e,t){this.http=e,this.cookieService=t,this.urlConfig=new f.a,this.host=this.urlConfig.mainHost}getTicketEventByRef(e){return this.http.get(`${this.host}${this.urlConfig.searchEventByRef}/${e}`)}getTicketTransportByRef(e){return this.http.get(`${this.host}${this.urlConfig.searchTransportByRef}/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(u.mc(b.b),u.mc(y.a))},e.\u0275prov=u.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var k=n("0hV+");function x(e,t){1&e&&(u.ec(0,"div",2),u.ec(1,"div",3),u.dd(2,"Chargement"),u.dc(),u.dc())}function C(e,t){if(1&e&&(u.ec(0,"div",6),u.ec(1,"h2",7),u.dd(2,"Info de l'evenement"),u.dc(),u.ec(3,"div",10),u.ec(4,"div",11),u.ec(5,"div",12),u.Zb(6,"img",13),u.dc(),u.ec(7,"div",14),u.ec(8,"a",15),u.dd(9),u.dc(),u.ec(10,"div",16),u.ec(11,"div"),u.ec(12,"h6"),u.dd(13,"Type"),u.dc(),u.dd(14),u.dc(),u.ec(15,"div"),u.ec(16,"h6"),u.dd(17,"Lieu"),u.dc(),u.dd(18),u.dc(),u.ec(19,"div"),u.ec(20,"h6"),u.dd(21,"D\xe9but"),u.dc(),u.dd(22),u.uc(23,"titlecase"),u.uc(24,"date"),u.dc(),u.ec(25,"div"),u.ec(26,"h6"),u.dd(27,"Fin"),u.dc(),u.dd(28),u.uc(29,"titlecase"),u.uc(30,"date"),u.dc(),u.dc(),u.dc(),u.dc(),u.ec(31,"div",17),u.ec(32,"h6",18),u.dd(33),u.dc(),u.dc(),u.dc(),u.dc()),2&e){const e=u.tc(2);u.Kb(6),u.Ec("src","../../../assets/images/event/",e.idEvent,".jpg",u.Vc),u.Kb(3),u.ed(e.event.designation),u.Kb(5),u.fd(": ",e.event.eventType,""),u.Kb(4),u.fd(": ",e.event.place.designation,""),u.Kb(4),u.gd(": ",u.vc(23,9,u.wc(24,11,e.event.startingDate,"EEEE, dd MMMM yyyy"))," a ",e.event.startingTime,""),u.Kb(6),u.gd(": ",u.vc(29,14,u.wc(30,16,e.event.endingDate,"EEEE, dd MMMM yyyy"))," a ",e.event.endingTime,""),u.Kb(5),u.ed(e.event.description)}}function M(e,t){if(1&e){const e=u.fc();u.ec(0,"div",21),u.qc("click",(function(){u.Tc(e);const n=t.index;return u.tc(3).downloadTicket("event",n)})),u.ec(1,"div",22),u.ec(2,"a",23),u.Zb(3,"i",24),u.dc(),u.dc(),u.ec(4,"div",25),u.Zb(5,"img",26),u.Zb(6,"qrcode",27),u.dc(),u.ec(7,"div",28),u.ec(8,"span",29),u.dd(9),u.dc(),u.ec(10,"span"),u.dd(11),u.dc(),u.ec(12,"span"),u.dd(13),u.uc(14,"date"),u.dc(),u.ec(15,"span",29),u.dd(16),u.uc(17,"currency"),u.dc(),u.dc(),u.Zb(18,"hr",30),u.ec(19,"div",31),u.ec(20,"div",32),u.ec(21,"p"),u.dd(22,"R\xe9serve sur"),u.dc(),u.Zb(23,"img",33),u.dc(),u.ec(24,"div",32),u.ec(25,"p"),u.dd(26,"Pay\xe9 via"),u.dc(),u.Zb(27,"img",34),u.dc(),u.dc(),u.ec(28,"div",35),u.dd(29," www.bookinpass.com "),u.dc(),u.dc()}if(2&e){const e=t.$implicit,n=t.index,i=u.tc(3);u.Ec("id","event-ticket-container",n,""),u.Kb(5),u.Ec("src","../../../assets/images/event/",i.idEvent,".jpg",u.Vc),u.Kb(1),u.Cc("allowEmptyString",!1)("elementType","url")("errorCorrectionLevel","H")("margin",0)("qrdata",e.codeTicket)("version",6)("width",90),u.Kb(3),u.ed(i.event.designation),u.Kb(2),u.ed(i.event.place.designation),u.Kb(2),u.gd("Le ",u.wc(14,16,i.event.startingDate,"dd MMM yyyy")," a partir de ",i.event.startingTime,""),u.Kb(3),u.gd("Ticket ",e.type.toLowerCase(),", ",u.yc(17,19,e.totalPrice,"XOF","symbol-narrow","1.1-2")," "),u.Kb(11),u.Cc("src",i.getLogoPath(e.transactionType),u.Vc)}}function O(e,t){if(1&e&&(u.ec(0,"div",19),u.bd(1,M,30,24,"div",20),u.dc()),2&e){const e=u.tc(2);u.Kb(1),u.Cc("ngForOf",e.eventTickets)}}function P(e,t){if(1&e){const e=u.fc();u.ec(0,"div",21),u.qc("click",(function(){u.Tc(e);const n=t.index;return u.tc(3).downloadTicket("event",n)})),u.ec(1,"div",36),u.Zb(2,"img",37),u.Zb(3,"qrcode",38),u.dc(),u.ec(4,"p",39),u.ec(5,"span",40),u.dd(6,"Date"),u.dc(),u.dd(7),u.uc(8,"titlecase"),u.uc(9,"date"),u.dc(),u.ec(10,"p",39),u.ec(11,"span",40),u.dd(12,"Prix"),u.dc(),u.dd(13),u.uc(14,"currency"),u.dc(),u.ec(15,"p",41),u.dd(16,"Ce ticket est non remboursable"),u.dc(),u.Zb(17,"hr",42),u.ec(18,"div",31),u.ec(19,"div",32),u.ec(20,"p"),u.dd(21,"R\xe9serve sur"),u.dc(),u.Zb(22,"img",33),u.dc(),u.ec(23,"div",32),u.ec(24,"p"),u.dd(25,"Pay\xe9 via"),u.dc(),u.Zb(26,"img",34),u.dc(),u.dc(),u.ec(27,"div",35),u.dd(28," www.bookinpass.com "),u.dc(),u.dc()}if(2&e){const e=t.$implicit,n=t.index,i=u.tc(3);u.Ec("id","transport-ticket-container",n,""),u.Kb(3),u.Cc("allowEmptyString",!1)("elementType","url")("errorCorrectionLevel","H")("margin",0)("qrdata",e.codeTicket)("version",6)("width",90),u.Kb(4),u.gd(": ",u.vc(8,12,u.wc(9,14,e.departDate,"dd MMMM yyyy"))," \xe0 ",e.departTime,""),u.Kb(6),u.fd(": ",u.yc(14,17,e.totalPrice,"XOF","symbol-narrow","1.1-1")," "),u.Kb(13),u.Cc("src",i.getLogoPath(e.transactionType),u.Vc)}}function T(e,t){if(1&e&&(u.ec(0,"div",19),u.bd(1,P,29,22,"div",20),u.dc()),2&e){const e=u.tc(2);u.Kb(1),u.Cc("ngForOf",e.transportTickets)}}function _(e,t){if(1&e){const e=u.fc();u.ec(0,"div",4),u.bd(1,C,34,19,"div",5),u.ec(2,"div",6),u.ec(3,"div"),u.ec(4,"h2",7),u.dd(5,"Mes billets"),u.dc(),u.ec(6,"div",8),u.qc("click",(function(){return u.Tc(e),u.tc().download()})),u.dd(7,"Telecharger"),u.dc(),u.dc(),u.bd(8,O,2,1,"div",9),u.bd(9,T,2,1,"div",9),u.dc(),u.dc()}if(2&e){const e=u.tc();u.Kb(1),u.Cc("ngIf","event_sport"===e.type),u.Kb(7),u.Cc("ngIf","event_sport"===e.type),u.Kb(1),u.Cc("ngIf","transport"===e.type)}}const E=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o){this.eventService=e,this.router=t,this.activatedRoute=n,this.errorHandler=i,this.ticketService=o,this.loading=!0,this.scavenger=new r.Scavenger(this),t.events.subscribe(e=>{e instanceof c.b&&this.activatedRoute.queryParamMap.subscribe(e=>{this.status=e.params.status,this.idTransaction=e.params.ref,this.items=Number(e.params.items),this.idEvent=e.params.id,this.type=e.params.type},e=>e)})}ngOnInit(){if("succeed"===this.status){let e;e=1===this.items?"L'achat de votre ticket a r\xe9ussi. Vous pouvez proceder au t\xe9l\xe9chargement de votre ticket. Si vous souhaitez partager votre ticket avec un de vos proches, veuillez vous rendre dans votre espace personnel.":"Vous venez d'acqu\xe9rir "+this.items+' billets. Vous pouvez t\xe9l\xe9charger vos billets. <strong class="underlined">NOTE:</strong> Tous les billets sont actuellement enregistr\xe9s sous votre nom. Une autre personne ne peut en faire usage que si vous la partagez. Veuillez vous rendre dans votre espace personnel pour partager ces billets.',d.a.fire({title:"Transaction accept\xe9e ",html:e,icon:"success",allowEscapeKey:!1,allowOutsideClick:!1,focusConfirm:!0,showCloseButton:!1}),"event_sport"===this.type.toLowerCase()?this.getEventSportDetails():"transport"===this.type.toLowerCase()&&this.getTransportTickets()}else this.failedStatus()}ngOnDestroy(){}getLogoPath(e){let t="../../../assets/images/icons/";switch(e.toLowerCase()){case"orange money":case"om":t=t.concat("OM.jpg");break;case"wari":t.concat("wari.png");break;case"joni joni":case"jj":t=t.concat("");break;case"paypal":case"pp":t=t.concat("paypal.png");break;default:t=""}return t}download(){this.loading=!0;const e="event_sport"===this.type?"event":"transport"===this.type?"transport":"";for(let t=0;t<this.items;++t){const n=document.getElementById(e+"-ticket-container"+t);console.log(n),null==n?d.a.fire("Erreur","Une erreure s'est produite lors de la tentative de telechargement des tickets!","error").then(e=>{e&&(this.loading=!1)}):p()(n).then(e=>{const t=2*e.height/e.width,n=e.toDataURL("image/jpeg"),i=new l("p","in","a8");i.addImage(n,"jepg",0,0,2,t,null,"slow"),i.save(`${new Date(Object(h.now)()).toISOString()}.pdf`,{returnPromise:!0}).then(()=>{this.loading=!1})})}}downloadTicket(e,t){console.log(e,t)}failedStatus(){}getEventSportDetails(){this.eventService.getAnEvent(this.idEvent).pipe(this.scavenger.collect(),Object(o.a)(3)).subscribe(e=>this.event=e,e=>{404===e.status?(new s.a).ErrorSwalWithReturn("Invalid ID","Cet ID ne correspond \xe0 aucun \xe9v\xe9nement").then(e=>{e&&this.router.navigate([""])}):this.errorHandler.handleError(e)},()=>this.getEventTickets())}getEventTickets(){this.ticketService.getTicketEventByRef(this.idTransaction).pipe(this.scavenger.collect(),Object(o.a)(3)).subscribe(e=>{e.length!==this.items?setTimeout(()=>this.getEventTickets(),1e3):(this.eventTickets=e,this.eventTickets.sort((e,t)=>e.totalPrice<t.totalPrice?-1:e.totalPrice>t.totalPrice?1:0),this.loading=!1)})}getTransportTickets(){this.ticketService.getTicketTransportByRef(this.idTransaction).pipe(this.scavenger.collect(),Object(o.a)(3)).subscribe(e=>{e.length!==this.items?setTimeout(()=>this.getTransportTickets(),1e3):(this.transportTickets=e,this.loading=!1)})}}return e.\u0275fac=function(t){return new(t||e)(u.Yb(v.a),u.Yb(c.c),u.Yb(c.a),u.Yb(m.a),u.Yb(w))},e.\u0275cmp=u.Sb({type:e,selectors:[["app-transaction"]],decls:2,vars:2,consts:[["class","ui active dimmer h-100 w-100",4,"ngIf"],["class","ui main container segments mb-4 mt-4",4,"ngIf"],[1,"ui","active","dimmer","h-100","w-100"],[1,"ui","active","huge","text","inverted","loader"],[1,"ui","main","container","segments","mb-4","mt-4"],["class","ui raised segment",4,"ngIf"],[1,"ui","raised","segment"],[1,"ui","dividing","header"],[1,"ui","right","floated","button","download-button",3,"click"],["class","my-tickets-container",4,"ngIf"],[1,"ui","items"],[1,"item"],[1,"ui","small","rectangle","image"],["alt","",3,"src"],[1,"content"],[1,"header","event-title"],[1,"description","d-flex","flex-column"],[1,"item","d-flex","flex-column"],[1,"font-weight-normal"],[1,"my-tickets-container"],["class","d-flex flex-column ticket-container",3,"id","click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","ticket-container",3,"id","click"],[1,"overlay"],["title","Telecharger",1,"icon"],[1,"download","inverted","icon"],[1,"ticket-header"],["alt","event image","height","100","width","220",3,"src"],[3,"allowEmptyString","elementType","errorCorrectionLevel","margin","qrdata","version","width"],[1,"ticket-body"],[1,"text-uppercase"],[1,"w-100"],[1,"d-flex","flex-row","justify-content-around"],[1,"d-flex","flex-column","justify-content-start","align-items-center","logo-container"],["alt","logo bip","src","../../../assets/images/logo/bip-logo-ticket.jpg"],["alt","logo vendeur",3,"src"],[1,"d-flex","flex-row","justify-content-end","ticket-footer"],[1,"ticket-header","bus"],["alt","sen-dd bus img","height","100","src","../../../assets/images/icons/sen-dd2.jpg","width","220",1,"bus"],[1,"bus",3,"allowEmptyString","elementType","errorCorrectionLevel","margin","qrdata","version","width"],[1,"h7","font-weight-bold","mb-1","ml-2"],[1,"underlined"],[1,"h7","font-weight-bold","mb-1","text-center",2,"color","#FF6600"],[2,"width","100% !important"]],template:function(e,t){1&e&&(u.bd(0,x,3,0,"div",0),u.bd(1,_,10,3,"div",1)),2&e&&(u.Cc("ngIf",t.loading),u.Kb(1),u.Cc("ngIf",!t.loading))},directives:[i.r,i.q,k.a],pipes:[i.A,i.f,i.d],styles:[".content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .event-title[_ngcontent-%COMP%]{font-family:Font Awesome\\ 5 Free Solid,Open Sans,Ubuntu,Roboto,Helvetica Neue,sans-serif!important}.content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{font-size:14px;font-weight:400;display:flex;flex-flow:row;margin-bottom:3px}.content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h6[_ngcontent-%COMP%]{font-weight:500;text-decoration:underline;margin-bottom:0}.download-button[_ngcontent-%COMP%]{background-color:#f60;color:#fff;position:absolute;right:0;top:4px}.my-tickets-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;flex-wrap:wrap;min-width:100%}.ticket-container[_ngcontent-%COMP%]{margin:0 0 20px;border:.3px solid #dedede;width:-webkit-max-content;width:-moz-max-content;width:max-content;height:-webkit-max-content;height:-moz-max-content;height:max-content;cursor:pointer;position:relative}.ticket-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;height:170px}.ticket-header.bus[_ngcontent-%COMP%]{height:175px}.ticket-header[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]:not(.bus){z-index:1;width:220px;height:100px}.ticket-header[_ngcontent-%COMP%] > qrcode[_ngcontent-%COMP%]{z-index:2;position:relative;bottom:20px}hr[_ngcontent-%COMP%]{margin:0 2px;border-color:#000}.ticket-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center}.ticket-body[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-bottom:1px;width:100%;font-size:12px;line-height:17px;text-align:center}.ticket-body[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child, .ticket-body[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{font-size:12px;font-weight:600}.ticket-body[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{color:#f60}.logo-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:1px;font-size:12px}.logo-container[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:100px;height:45px}.logo-container[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%]{width:45px;height:45px}.ticket-footer[_ngcontent-%COMP%]{background-color:#000;height:20px;color:#fff;font-size:12px;margin-top:2px;padding-right:10px;font-family:open sans,sans-serif;font-weight:500;width:100%}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;height:100%;width:100%;opacity:0;transition:.3s ease;z-index:4;background-color:#111}.ticket-container[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:.75}.icon[_ngcontent-%COMP%]{color:#f60;font-size:50px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);text-align:center}@media screen and (max-width:768px){.my-tickets-container[_ngcontent-%COMP%]{justify-content:space-evenly}}@media print{.ticket-container[_ngcontent-%COMP%]{margin:0!important;page-break-after:always}}"]}),e})()}];let K=(()=>{class e{}return e.\u0275mod=u.Wb({type:e}),e.\u0275inj=u.Vb({factory:function(t){return new(t||e)},imports:[[c.g.forChild(E)],c.g]}),e})(),j=(()=>{class e{}return e.\u0275mod=u.Wb({type:e}),e.\u0275inj=u.Vb({factory:function(t){return new(t||e)},imports:[[i.c,K,k.b]]}),e})()}}]);