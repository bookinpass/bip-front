function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ypLv:function(e,t,n){"use strict";n.r(t),n.d(t,"TransactionModule",(function(){return U}));var i,c=n("ofXK"),o=n("tyNb"),a=n("un/a"),r=n("BapT"),s=n("+0XT"),l=n("PSD3"),d=n.n(l),g=n("5RHE"),u=n("wOnQ"),b=n.n(u),p=n("wd/R"),f=n("fXoL"),v=n("gcxx"),h=n("AXpb"),m=n("QnqH"),y=n("tk/3"),C=n("jzuh"),w=((i=function(){function e(t,n){_classCallCheck(this,e),this.http=t,this.cookieService=n,this.urlConfig=new m.a,this.host=this.urlConfig.mainHost}return _createClass(e,[{key:"getTicketEventByRef",value:function(e){return this.http.get("".concat(this.host).concat(this.urlConfig.searchEventByRef,"/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||i)(f.ec(y.b),f.ec(C.a))},i.\u0275prov=f.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),k=n("0hV+");function x(e,t){1&e&&(f.Wb(0,"div",2),f.Wb(1,"div",3),f.Uc(2,"Chargement"),f.Vb(),f.Vb())}function O(e,t){if(1&e&&(f.Wb(0,"div",6),f.Wb(1,"h2",7),f.Uc(2,"Info de l'evenement"),f.Vb(),f.Wb(3,"div",10),f.Wb(4,"div",11),f.Wb(5,"div",12),f.Rb(6,"img",13),f.Vb(),f.Wb(7,"div",14),f.Wb(8,"a",15),f.Uc(9),f.Vb(),f.Wb(10,"div",16),f.Wb(11,"div"),f.Wb(12,"h6"),f.Uc(13,"Type"),f.Vb(),f.Uc(14),f.Vb(),f.Wb(15,"div"),f.Wb(16,"h6"),f.Uc(17,"Lieu"),f.Vb(),f.Uc(18),f.Vb(),f.Wb(19,"div"),f.Wb(20,"h6"),f.Uc(21,"D\xe9but"),f.Vb(),f.Uc(22),f.mc(23,"titlecase"),f.mc(24,"date"),f.Vb(),f.Wb(25,"div"),f.Wb(26,"h6"),f.Uc(27,"Fin"),f.Vb(),f.Uc(28),f.mc(29,"titlecase"),f.mc(30,"date"),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Wb(31,"div",17),f.Wb(32,"h6",18),f.Uc(33),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&e){var n=f.lc(2);f.Cb(6),f.wc("src","../../../assets/images/event/",n.idEvent,".jpg",f.Nc),f.Cb(3),f.Vc(n.event.designation),f.Cb(5),f.Wc(": ",n.event.eventType,""),f.Cb(4),f.Wc(": ",n.event.place.designation,""),f.Cb(4),f.Xc(": ",f.nc(23,9,f.oc(24,11,n.event.startingDate,"EEEE, dd MMMM yyyy"))," a ",n.event.startingTime,""),f.Cb(6),f.Xc(": ",f.nc(29,14,f.oc(30,16,n.event.endingDate,"EEEE, dd MMMM yyyy"))," a ",n.event.endingTime,""),f.Cb(5),f.Vc(n.event.description)}}function M(e,t){if(1&e&&(f.Wb(0,"div",21),f.Wb(1,"div",22),f.Rb(2,"img",23),f.Rb(3,"qrcode",24),f.Vb(),f.Wb(4,"div",25),f.Wb(5,"span",26),f.Uc(6),f.Vb(),f.Wb(7,"span"),f.Uc(8),f.Vb(),f.Wb(9,"span"),f.Uc(10),f.mc(11,"date"),f.Vb(),f.Wb(12,"span",26),f.Uc(13),f.mc(14,"currency"),f.Vb(),f.Vb(),f.Rb(15,"hr",27),f.Wb(16,"div",28),f.Wb(17,"div",29),f.Wb(18,"p"),f.Uc(19,"R\xe9serve sur"),f.Vb(),f.Rb(20,"img",30),f.Vb(),f.Wb(21,"div",29),f.Wb(22,"p"),f.Uc(23,"Pay\xe9 via"),f.Vb(),f.Rb(24,"img",31),f.Vb(),f.Vb(),f.Wb(25,"div",32),f.Uc(26," www.bookinpass.com "),f.Vb(),f.Vb()),2&e){var n=t.$implicit,i=f.lc(3);f.wc("id","ticket-container",i.eventTickets.indexOf(n)+1,""),f.Cb(2),f.wc("src","../../../assets/images/event/",i.idEvent,".jpg",f.Nc),f.Cb(1),f.uc("allowEmptyString",!1)("elementType","url")("errorCorrectionLevel","H")("margin",2)("qrdata",n.codeTicket)("version",6)("width",100),f.Cb(3),f.Vc(i.event.designation),f.Cb(2),f.Vc(i.event.place.designation),f.Cb(2),f.Xc("Le ",f.oc(11,16,i.event.startingDate,"dd MMM yyyy")," a partir de ",i.event.startingTime,""),f.Cb(3),f.Xc("Ticket ",n.type.toLowerCase(),", ",f.qc(14,19,n.totalPrice,"XOF","symbol-narrow","1.1-2")," "),f.Cb(11),f.uc("src",i.getLogoPath(n.transactionType),f.Nc)}}function P(e,t){if(1&e&&(f.Wb(0,"div",19),f.Sc(1,M,27,24,"div",20),f.Vb()),2&e){var n=f.lc(2);f.Cb(1),f.uc("ngForOf",n.eventTickets)}}function _(e,t){if(1&e){var n=f.Xb();f.Wb(0,"div",4),f.Sc(1,O,34,19,"div",5),f.Wb(2,"div",6),f.Wb(3,"div"),f.Wb(4,"h2",7),f.Uc(5,"Mes billets"),f.Vb(),f.Wb(6,"div",8),f.ic("click",(function(){return f.Lc(n),f.lc().download()})),f.Uc(7,"Telecharger"),f.Vb(),f.Vb(),f.Sc(8,P,2,1,"div",9),f.Vb(),f.Vb()}if(2&e){var i=f.lc();f.Cb(1),f.uc("ngIf","event_sport"===i.type),f.Cb(7),f.uc("ngIf","event_sport"===i.type)}}var V,W,E,T=[{path:"",component:(V=function(){function e(t,n,i,c,a){var r=this;_classCallCheck(this,e),this.eventService=t,this.router=n,this.activatedRoute=i,this.errorHandler=c,this.ticketService=a,this.loading=!0,this.scavenger=new s.Scavenger(this),n.events.subscribe((function(e){e instanceof o.b&&r.activatedRoute.queryParamMap.subscribe((function(e){r.status=e.params.status,r.idTransaction=e.params.ref,r.items=Number(e.params.items),r.idEvent=e.params.id,r.type=e.params.type}),(function(e){return e}))}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e;"succeed"===this.status?(e=1===this.items?"L'achat de votre ticket a r\xe9ussi. Vous pouvez proceder au t\xe9l\xe9chargement de votre ticket. Si vous souhaitez partager votre ticket avec un de vos proches, veuillez vous rendre dans votre espace personnel.":"Vous venez d'acqu\xe9rir "+this.items+' billets. Vous pouvez t\xe9l\xe9charger vos billets. <strong class="underlined">NOTE:</strong> Tous les billets sont actuellement enregistr\xe9s sous votre nom. Une autre personne ne peut en faire usage que si vous la partagez. Veuillez vous rendre dans votre espace personnel pour partager ces billets.',d.a.fire({title:"Transaction accept\xe9e ",html:e,icon:"success",allowEscapeKey:!1,allowOutsideClick:!1,focusConfirm:!0,showCloseButton:!1}),"event_sport"===this.type.toLowerCase()&&this.getEventSportDetails()):this.failedStatus()}},{key:"ngOnDestroy",value:function(){}},{key:"getLogoPath",value:function(e){var t="../../../assets/images/icons/";switch(e.toLowerCase()){case"orange money":case"om":t=t.concat("OM.jpg");break;case"wari":t.concat("wari.png");break;case"joni joni":case"jj":t=t.concat("");break;case"paypal":case"pp":t=t.concat("paypal.png");break;default:t=""}return t}},{key:"download",value:function(){var e=this;this.loading=!0;var t=document.getElementById("ticket-container1");b()(t).then((function(t){var n=2.91*t.height/t.width,i=t.toDataURL("image/jpg"),c=new g("p","in","a7");c.addImage(i,"jpg",0,0,2.91,n,null,"slow"),c.save("".concat(new Date(Object(p.now)()).toISOString(),".pdf"),{returnPromise:!0}).then((function(){e.loading=!1}))}))}},{key:"failedStatus",value:function(){}},{key:"getEventSportDetails",value:function(){var e=this;this.eventService.getAnEvent(this.idEvent).pipe(this.scavenger.collect(),Object(a.a)(3)).subscribe((function(t){return e.event=t}),(function(t){404===t.status?(new r.a).ErrorSwalWithReturn("Invalid ID","Cet ID ne correspond \xe0 aucun \xe9v\xe9nement").then((function(t){t&&e.router.navigate([""])})):e.errorHandler.handleError(t)}),(function(){return e.getEventTickets()}))}},{key:"getEventTickets",value:function(){var e=this;this.ticketService.getTicketEventByRef(this.idTransaction).pipe(this.scavenger.collect(),Object(a.a)(3)).subscribe((function(t){t.length!==e.items?e.getEventTickets():(e.eventTickets=t,e.eventTickets.sort((function(e,t){return e.totalPrice<t.totalPrice?-1:e.totalPrice>t.totalPrice?1:0})),e.loading=!1)}))}}]),e}(),V.\u0275fac=function(e){return new(e||V)(f.Qb(v.a),f.Qb(o.c),f.Qb(o.a),f.Qb(h.a),f.Qb(w))},V.\u0275cmp=f.Kb({type:V,selectors:[["app-transaction"]],decls:2,vars:2,consts:[["class","ui active dimmer h-100 w-100",4,"ngIf"],["class","ui main container segments mb-4 mt-4",4,"ngIf"],[1,"ui","active","dimmer","h-100","w-100"],[1,"ui","active","huge","text","inverted","loader"],[1,"ui","main","container","segments","mb-4","mt-4"],["class","ui raised segment",4,"ngIf"],[1,"ui","raised","segment"],[1,"ui","dividing","header"],[1,"ui","right","floated","button","download-button",3,"click"],["class","my-tickets-container",4,"ngIf"],[1,"ui","items"],[1,"item"],[1,"ui","small","rectangle","image"],["alt","",3,"src"],[1,"content"],[1,"header","event-title"],[1,"description","d-flex","flex-column"],[1,"item","d-flex","flex-column"],[1,"font-weight-normal"],[1,"my-tickets-container"],["class","ticket-container",3,"id",4,"ngFor","ngForOf"],[1,"ticket-container",3,"id"],[1,"ticket-header"],["alt","event image",3,"src"],[3,"allowEmptyString","elementType","errorCorrectionLevel","margin","qrdata","version","width"],[1,"ticket-body"],[1,"text-uppercase"],[1,"w-100"],[1,"d-flex","flex-row","justify-content-around"],[1,"d-flex","flex-column","justify-content-start","align-items-center","logo-container"],["alt","logo bip","src","../../../assets/images/logo/bip-logo.png"],["alt","logo vendeur",3,"src"],[1,"d-flex","flex-row","justify-content-end","ticket-footer"]],template:function(e,t){1&e&&(f.Sc(0,x,3,0,"div",0),f.Sc(1,_,9,2,"div",1)),2&e&&(f.uc("ngIf",t.loading),f.Cb(1),f.uc("ngIf",!t.loading))},directives:[c.q,c.p,k.a],pipes:[c.z,c.f,c.d],styles:[".content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .event-title[_ngcontent-%COMP%]{font-family:Font Awesome\\ 5 Free Solid,Open Sans,Ubuntu,Roboto,Helvetica Neue,sans-serif!important}.content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{font-size:14px;font-weight:400;display:flex;flex-flow:row;margin-bottom:3px}.content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h6[_ngcontent-%COMP%]{font-weight:500;text-decoration:underline;margin-bottom:0}.download-button[_ngcontent-%COMP%]{background-color:#f60;color:#fff;position:absolute;right:0;top:4px}.my-tickets-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;flex-wrap:wrap;min-width:100%}.ticket-container[_ngcontent-%COMP%]{margin:10px 0 10px 20px;width:-webkit-max-content;width:-moz-max-content;width:max-content;height:-webkit-max-content;height:-moz-max-content;height:max-content}.ticket-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;height:175px}.ticket-header[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{z-index:1;width:220px;height:100px}.ticket-header[_ngcontent-%COMP%] > qrcode[_ngcontent-%COMP%]{z-index:2;position:relative;bottom:30px}hr[_ngcontent-%COMP%]{margin:0 2px;border-color:#000}.ticket-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center}.ticket-body[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{font-size:14px;font-weight:700}.ticket-body[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-bottom:1px;width:100%;font-size:12px;line-height:17px;text-align:center}.ticket-body[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{color:#f60;font-weight:700;font-size:13px}.logo-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:1px;font-size:12px}.logo-container[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:100px;height:45px}.logo-container[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%]{width:40px;height:45px}.ticket-footer[_ngcontent-%COMP%]{background-color:#000;height:22px;color:#fff;font-size:13px;margin-top:2px;padding-right:10px;font-family:ubuntu,open sans,sans-serif;font-weight:900}@media screen and (max-width:768px){.my-tickets-container[_ngcontent-%COMP%]{justify-content:space-evenly}}@media print{.ticket-container[_ngcontent-%COMP%]{page-break-after:always}}"]}),V)}],S=((E=function e(){_classCallCheck(this,e)}).\u0275mod=f.Ob({type:E}),E.\u0275inj=f.Nb({factory:function(e){return new(e||E)},imports:[[o.g.forChild(T)],o.g]}),E),U=((W=function e(){_classCallCheck(this,e)}).\u0275mod=f.Ob({type:W}),W.\u0275inj=f.Nb({factory:function(e){return new(e||W)},imports:[[c.c,S,k.b]]}),W)}}]);