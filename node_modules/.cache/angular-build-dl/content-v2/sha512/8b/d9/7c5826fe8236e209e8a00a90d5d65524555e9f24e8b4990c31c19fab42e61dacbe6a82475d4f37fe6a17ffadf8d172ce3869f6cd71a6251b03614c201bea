(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ypLv:function(t,e,n){"use strict";n.r(e),n.d(e,"TransactionModule",(function(){return _}));var i=n("ofXK"),o=n("tyNb"),c=n("un/a"),s=n("BapT"),a=n("+0XT"),r=n("PSD3"),l=n.n(r),d=n("5RHE"),g=n("wOnQ"),b=n.n(g),p=n("wd/R"),u=n("fXoL"),h=n("gcxx"),v=n("AXpb"),m=n("QnqH"),f=n("tk/3"),w=n("jzuh");let y=(()=>{class t{constructor(t,e){this.http=t,this.cookieService=e,this.urlConfig=new m.a,this.host=this.urlConfig.mainHost}getTicketEventByRef(t){return this.http.get(`${this.host}${this.urlConfig.searchEventByRef}/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(u.ec(f.b),u.ec(w.a))},t.\u0275prov=u.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=n("0hV+");function x(t,e){1&t&&(u.Wb(0,"div",2),u.Wb(1,"div",3),u.Uc(2,"Chargement"),u.Vb(),u.Vb())}function k(t,e){if(1&t&&(u.Wb(0,"div",6),u.Wb(1,"h2",7),u.Uc(2,"Info de l'evenement"),u.Vb(),u.Wb(3,"div",10),u.Wb(4,"div",11),u.Wb(5,"div",12),u.Rb(6,"img",13),u.Vb(),u.Wb(7,"div",14),u.Wb(8,"a",15),u.Uc(9),u.Vb(),u.Wb(10,"div",16),u.Wb(11,"div"),u.Wb(12,"h6"),u.Uc(13,"Type"),u.Vb(),u.Uc(14),u.Vb(),u.Wb(15,"div"),u.Wb(16,"h6"),u.Uc(17,"Lieu"),u.Vb(),u.Uc(18),u.Vb(),u.Wb(19,"div"),u.Wb(20,"h6"),u.Uc(21,"D\xe9but"),u.Vb(),u.Uc(22),u.mc(23,"titlecase"),u.mc(24,"date"),u.Vb(),u.Wb(25,"div"),u.Wb(26,"h6"),u.Uc(27,"Fin"),u.Vb(),u.Uc(28),u.mc(29,"titlecase"),u.mc(30,"date"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(31,"div",17),u.Wb(32,"h6",18),u.Uc(33),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t){const t=u.lc(2);u.Cb(6),u.wc("src","../../../assets/images/event/",t.idEvent,".jpg",u.Nc),u.Cb(3),u.Vc(t.event.designation),u.Cb(5),u.Wc(": ",t.event.eventType,""),u.Cb(4),u.Wc(": ",t.event.place.designation,""),u.Cb(4),u.Xc(": ",u.nc(23,9,u.oc(24,11,t.event.startingDate,"EEEE, dd MMMM yyyy"))," a ",t.event.startingTime,""),u.Cb(6),u.Xc(": ",u.nc(29,14,u.oc(30,16,t.event.endingDate,"EEEE, dd MMMM yyyy"))," a ",t.event.endingTime,""),u.Cb(5),u.Vc(t.event.description)}}function O(t,e){if(1&t&&(u.Wb(0,"div",21),u.Wb(1,"div",22),u.Rb(2,"img",23),u.Rb(3,"qrcode",24),u.Vb(),u.Wb(4,"div",25),u.Wb(5,"span",26),u.Uc(6),u.Vb(),u.Wb(7,"span"),u.Uc(8),u.Vb(),u.Wb(9,"span"),u.Uc(10),u.mc(11,"date"),u.Vb(),u.Wb(12,"span",26),u.Uc(13),u.mc(14,"currency"),u.Vb(),u.Vb(),u.Rb(15,"hr",27),u.Wb(16,"div",28),u.Wb(17,"div",29),u.Wb(18,"p"),u.Uc(19,"R\xe9serve sur"),u.Vb(),u.Rb(20,"img",30),u.Vb(),u.Wb(21,"div",29),u.Wb(22,"p"),u.Uc(23,"Pay\xe9 via"),u.Vb(),u.Rb(24,"img",31),u.Vb(),u.Vb(),u.Wb(25,"div",32),u.Uc(26," www.bookinpass.com "),u.Vb(),u.Vb()),2&t){const t=e.$implicit,n=u.lc(3);u.wc("id","ticket-container",n.eventTickets.indexOf(t)+1,""),u.Cb(2),u.wc("src","../../../assets/images/event/",n.idEvent,".jpg",u.Nc),u.Cb(1),u.uc("allowEmptyString",!1)("elementType","url")("errorCorrectionLevel","H")("margin",2)("qrdata",t.codeTicket)("version",6)("width",100),u.Cb(3),u.Vc(n.event.designation),u.Cb(2),u.Vc(n.event.place.designation),u.Cb(2),u.Xc("Le ",u.oc(11,16,n.event.startingDate,"dd MMM yyyy")," a partir de ",n.event.startingTime,""),u.Cb(3),u.Xc("Ticket ",t.type.toLowerCase(),", ",u.qc(14,19,t.totalPrice,"XOF","symbol-narrow","1.1-2")," "),u.Cb(11),u.uc("src",n.getLogoPath(t.transactionType),u.Nc)}}function M(t,e){if(1&t&&(u.Wb(0,"div",19),u.Sc(1,O,27,24,"div",20),u.Vb()),2&t){const t=u.lc(2);u.Cb(1),u.uc("ngForOf",t.eventTickets)}}function V(t,e){if(1&t){const t=u.Xb();u.Wb(0,"div",4),u.Sc(1,k,34,19,"div",5),u.Wb(2,"div",6),u.Wb(3,"div"),u.Wb(4,"h2",7),u.Uc(5,"Mes billets"),u.Vb(),u.Wb(6,"div",8),u.ic("click",(function(){return u.Lc(t),u.lc().download()})),u.Uc(7,"Telecharger"),u.Vb(),u.Vb(),u.Sc(8,M,2,1,"div",9),u.Vb(),u.Vb()}if(2&t){const t=u.lc();u.Cb(1),u.uc("ngIf","event_sport"===t.type),u.Cb(7),u.uc("ngIf","event_sport"===t.type)}}const P=[{path:"",component:(()=>{class t{constructor(t,e,n,i,c){this.eventService=t,this.router=e,this.activatedRoute=n,this.errorHandler=i,this.ticketService=c,this.loading=!0,this.scavenger=new a.Scavenger(this),e.events.subscribe(t=>{t instanceof o.b&&this.activatedRoute.queryParamMap.subscribe(t=>{this.status=t.params.status,this.idTransaction=t.params.ref,this.items=Number(t.params.items),this.idEvent=t.params.id,this.type=t.params.type},t=>t)})}ngOnInit(){if("succeed"===this.status){let t;t=1===this.items?"L'achat de votre ticket a r\xe9ussi. Vous pouvez proceder au t\xe9l\xe9chargement de votre ticket. Si vous souhaitez partager votre ticket avec un de vos proches, veuillez vous rendre dans votre espace personnel.":"Vous venez d'acqu\xe9rir "+this.items+' billets. Vous pouvez t\xe9l\xe9charger vos billets. <strong class="underlined">NOTE:</strong> Tous les billets sont actuellement enregistr\xe9s sous votre nom. Une autre personne ne peut en faire usage que si vous la partagez. Veuillez vous rendre dans votre espace personnel pour partager ces billets.',l.a.fire({title:"Transaction accept\xe9e ",html:t,icon:"success",allowEscapeKey:!1,allowOutsideClick:!1,focusConfirm:!0,showCloseButton:!1}),"event_sport"===this.type.toLowerCase()&&this.getEventSportDetails()}else this.failedStatus()}ngOnDestroy(){}getLogoPath(t){let e="../../../assets/images/icons/";switch(t.toLowerCase()){case"orange money":case"om":e=e.concat("OM.jpg");break;case"wari":e.concat("wari.png");break;case"joni joni":case"jj":e=e.concat("");break;case"paypal":case"pp":e=e.concat("paypal.png");break;default:e=""}return e}download(){this.loading=!0;const t=document.getElementById("ticket-container1");b()(t).then(t=>{const e=2.91*t.height/t.width,n=t.toDataURL("image/jpg"),i=new d("p","in","a7");i.addImage(n,"jpg",0,0,2.91,e,null,"slow"),i.save(`${new Date(Object(p.now)()).toISOString()}.pdf`,{returnPromise:!0}).then(()=>{this.loading=!1})})}failedStatus(){}getEventSportDetails(){this.eventService.getAnEvent(this.idEvent).pipe(this.scavenger.collect(),Object(c.a)(3)).subscribe(t=>this.event=t,t=>{404===t.status?(new s.a).ErrorSwalWithReturn("Invalid ID","Cet ID ne correspond \xe0 aucun \xe9v\xe9nement").then(t=>{t&&this.router.navigate([""])}):this.errorHandler.handleError(t)},()=>this.getEventTickets())}getEventTickets(){this.ticketService.getTicketEventByRef(this.idTransaction).pipe(this.scavenger.collect(),Object(c.a)(3)).subscribe(t=>{t.length!==this.items?this.getEventTickets():(this.eventTickets=t,this.eventTickets.sort((t,e)=>t.totalPrice<e.totalPrice?-1:t.totalPrice>e.totalPrice?1:0),this.loading=!1)})}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(h.a),u.Qb(o.c),u.Qb(o.a),u.Qb(v.a),u.Qb(y))},t.\u0275cmp=u.Kb({type:t,selectors:[["app-transaction"]],decls:2,vars:2,consts:[["class","ui active dimmer h-100 w-100",4,"ngIf"],["class","ui main container segments mb-4 mt-4",4,"ngIf"],[1,"ui","active","dimmer","h-100","w-100"],[1,"ui","active","huge","text","inverted","loader"],[1,"ui","main","container","segments","mb-4","mt-4"],["class","ui raised segment",4,"ngIf"],[1,"ui","raised","segment"],[1,"ui","dividing","header"],[1,"ui","right","floated","button","download-button",3,"click"],["class","my-tickets-container",4,"ngIf"],[1,"ui","items"],[1,"item"],[1,"ui","small","rectangle","image"],["alt","",3,"src"],[1,"content"],[1,"header","event-title"],[1,"description","d-flex","flex-column"],[1,"item","d-flex","flex-column"],[1,"font-weight-normal"],[1,"my-tickets-container"],["class","ticket-container",3,"id",4,"ngFor","ngForOf"],[1,"ticket-container",3,"id"],[1,"ticket-header"],["alt","event image",3,"src"],[3,"allowEmptyString","elementType","errorCorrectionLevel","margin","qrdata","version","width"],[1,"ticket-body"],[1,"text-uppercase"],[1,"w-100"],[1,"d-flex","flex-row","justify-content-around"],[1,"d-flex","flex-column","justify-content-start","align-items-center","logo-container"],["alt","logo bip","src","../../../assets/images/logo/bip-logo.png"],["alt","logo vendeur",3,"src"],[1,"d-flex","flex-row","justify-content-end","ticket-footer"]],template:function(t,e){1&t&&(u.Sc(0,x,3,0,"div",0),u.Sc(1,V,9,2,"div",1)),2&t&&(u.uc("ngIf",e.loading),u.Cb(1),u.uc("ngIf",!e.loading))},directives:[i.q,i.p,C.a],pipes:[i.z,i.f,i.d],styles:[".content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .event-title[_ngcontent-%COMP%]{font-family:Font Awesome\\ 5 Free Solid,Open Sans,Ubuntu,Roboto,Helvetica Neue,sans-serif!important}.content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{font-size:14px;font-weight:400;display:flex;flex-flow:row;margin-bottom:3px}.content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h6[_ngcontent-%COMP%]{font-weight:500;text-decoration:underline;margin-bottom:0}.download-button[_ngcontent-%COMP%]{background-color:#f60;color:#fff;position:absolute;right:0;top:4px}.my-tickets-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;flex-wrap:wrap;min-width:100%}.ticket-container[_ngcontent-%COMP%]{margin:10px 0 10px 20px;width:-webkit-max-content;width:-moz-max-content;width:max-content;height:-webkit-max-content;height:-moz-max-content;height:max-content}.ticket-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;height:175px}.ticket-header[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{z-index:1;width:220px;height:100px}.ticket-header[_ngcontent-%COMP%] > qrcode[_ngcontent-%COMP%]{z-index:2;position:relative;bottom:30px}hr[_ngcontent-%COMP%]{margin:0 2px;border-color:#000}.ticket-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center}.ticket-body[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{font-size:14px;font-weight:700}.ticket-body[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-bottom:1px;width:100%;font-size:12px;line-height:17px;text-align:center}.ticket-body[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{color:#f60;font-weight:700;font-size:13px}.logo-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:1px;font-size:12px}.logo-container[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:100px;height:45px}.logo-container[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%]{width:40px;height:45px}.ticket-footer[_ngcontent-%COMP%]{background-color:#000;height:22px;color:#fff;font-size:13px;margin-top:2px;padding-right:10px;font-family:ubuntu,open sans,sans-serif;font-weight:900}@media screen and (max-width:768px){.my-tickets-container[_ngcontent-%COMP%]{justify-content:space-evenly}}@media print{.ticket-container[_ngcontent-%COMP%]{page-break-after:always}}"]}),t})()}];let W=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[o.g.forChild(P)],o.g]}),t})(),_=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[i.c,W,C.b]]}),t})()}}]);