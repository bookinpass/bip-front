function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1wJT":function(e,t,n){var r=n("qqu+");e.exports=function(e){return null==e?"\\s":e.source?e.source:"["+r(e)+"]"}},Ctv7:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("/h9T"),a=n("pl0G"),c=n("jIYg");function o(e,t){Object(c.a)(2,arguments);var n=Object(r.a)(t);return Object(a.a)(e,1e3*n)}},DrXB:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));var r=n("3Pt+"),a=n("PoRY");function c(e,t){return function(n){var r=n.controls[t];r.errors&&!r.errors.mustMatch||r.setErrors(n.controls[e].value!==r.value?{mustMatch:!0}:null)}}function o(e){return function(t){return t.value?r.x.compose(e)(t):null}}function i(e,t){return function(n){var r=n.controls[e],c=n.controls[t];c.errors&&!c.errors.checkTelephone||r.errors&&!c.errors.required||(Object(a.c)(c.value,r.value.toUpperCase())?c.setErrors(null):c.setErrors({validPhone:!0}))}}},EhJz:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("/Tr7"),a=n("jIYg");function c(e,t){Object(a.a)(2,arguments);var n=Object(r.a)(e),c=Object(r.a)(t);return n.getTime()>c.getTime()}},"Mf+4":function(e,t,n){var r=n("ZVcv");e.exports=function(e,t){e=r(e);var n=t?e.slice(1).toLowerCase():e.slice(1);return e.charAt(0).toUpperCase()+n}},MlvY:function(e,t,n){var r=n("Mf+4"),a=n("tacv"),c=n("Pg24");e.exports=function(e){return r(c(a(e).replace(/_id$/,"").replace(/_/g," ")))}},Orh4:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("/Tr7"),a=n("jIYg");function c(e,t){Object(a.a)(2,arguments);var n=Object(r.a)(e),c=Object(r.a)(t);return n.getTime()-c.getTime()}},Pg24:function(e,t,n){var r=n("ZVcv"),a=n("1wJT"),c=String.prototype.trim;e.exports=function(e,t){return e=r(e),!t&&c?c.call(e):(t=a(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},"Se/U":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("/Tr7"),a=n("jIYg");function c(e){Object(a.a)(1,arguments);var t=Object(r.a)(e);return!isNaN(t)}},ZVcv:function(e,t){e.exports=function(e){return null==e?"":""+e}},dLU1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("/h9T"),a=n("/Tr7"),c=n("jIYg");function o(e,t){Object(c.a)(2,arguments);var n=Object(a.a)(e),o=Object(r.a)(t);if(isNaN(o))return new Date(NaN);if(!o)return n;var i=n.getDate(),s=new Date(n.getTime());s.setMonth(n.getMonth()+o+1,0);var u=s.getDate();return i>=u?s:(n.setFullYear(s.getFullYear(),s.getMonth(),i),n)}},"jG/O":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("Orh4"),a=n("jIYg");function c(e,t){Object(a.a)(2,arguments);var n=Object(r.a)(e,t)/6e4;return n>0?Math.floor(n):Math.ceil(n)}},moCM:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("Orh4"),a=n("jIYg");function c(e,t){Object(a.a)(2,arguments);var n=Object(r.a)(e,t)/36e5;return n>0?Math.floor(n):Math.ceil(n)}},oVPa:function(e,t,n){"use strict";n.r(t),n.d(t,"PaymentModule",(function(){return f}));var r,a,c=n("ofXK"),o=n("tyNb"),i=n("ywLJ"),s=n("fXoL"),u=[{path:"",component:i.a}],l=((r=function e(){_classCallCheck(this,e)}).\u0275mod=s.Wb({type:r}),r.\u0275inj=s.Vb({factory:function(e){return new(e||r)},imports:[[o.g.forChild(u)],o.g]}),r),d=n("3Pt+"),p=n("0IaG"),f=((a=function e(){_classCallCheck(this,e)}).\u0275mod=s.Wb({type:a}),a.\u0275inj=s.Vb({factory:function(e){return new(e||a)},imports:[[c.c,l,d.i,p.f]]}),a)},"qqu+":function(e,t,n){var r=n("ZVcv");e.exports=function(e){return r(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},"sdC+":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("/h9T"),a=n("zbbA"),c=n("jIYg");function o(e,t){Object(c.a)(2,arguments);var n=Object(r.a)(t);return Object(a.a)(e,-n)}},tacv:function(e,t,n){var r=n("Pg24");e.exports=function(e){return r(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},ywLJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r,a=n("fXoL"),c=n("QnqH"),o=n("BapT"),i=n("QmTJ"),s=n("MsxN"),u=n("+0XT"),l=n("PSD3"),d=n.n(l),p=n("PoRY"),f=n("0IaG"),h=n("Da6A"),g=n("un/a"),v=n("ofXK"),y=n("tk/3"),m=((r=function(){function e(t){_classCallCheck(this,e),this.http=t,this.config=new c.a}return _createClass(e,[{key:"getCurrencyConverterRate",value:function(e,t,n){var r=new y.f({fromObject:{format:"json",from:e,to:t,amount:n.toString()}}),a=new y.e({"x-rapidapi-host":"currency-converter5.p.rapidapi.com","x-rapidapi-key":"67568f8200msh5098fd2bce948a2p156272jsn548d1cf520b5"});return this.http.get("https://currency-converter5.p.rapidapi.com/currency/convert",{headers:a,params:r})}},{key:"sendNotificationSMS",value:function(e,t){return e=e.replace("+",""),this.http.post("".concat(this.config.mainHost).concat(this.config.sendSmsNotification,"?telephone=").concat(e),JSON.stringify(t))}}]),e}()).\u0275fac=function(e){return new(e||r)(a.mc(y.b))},r.\u0275prov=a.Ub({token:r,factory:r.\u0275fac,providedIn:"root"}),r),b=n("3Pt+");function C(e,t){if(1&e&&(a.ec(0,"option",18),a.cd(1),a.dc()),2&e){var n=t.$implicit;a.Cc("value",n.code),a.Kb(1),a.dd(n.name)}}var w,j,O=((w=function(){function e(t,n,r,a){_classCallCheck(this,e),this.dialogRef=t,this.data=n,this.datePipe=r,this.currency=a,this.loading=!1,this.countries=(new i.a).countries,this.status=!1,this.scavenger=new u.Scavenger(this)}return _createClass(e,[{key:"ngOnInit",value:function(){this.payer=this.data.payer,this.price=this.data.price}},{key:"ngOnDestroy",value:function(){}},{key:"getCountryDialingCode",value:function(){var e=this;return(new s.a).countries.find((function(t){return t.code.equalIgnoreCase(e.payer.countryCode)})).dial_code}},{key:"cancelRequest",value:function(){var e=this;d.a.fire("Annul\xe9","Vous avez annul\xe9 le processus de paiement","info").then((function(t){t&&(e.data.status="canceled",e.dialogRef.close(e.status))}))}},{key:"validateRequest",value:function(){var e=this;this.checkPhoneNumber()?(this.loading=!0,setTimeout((function(){d.a.fire({title:"Cash payment",html:'<p class="text-center">Votre reservation a \xe9t\xe9 enregistr\xe9e. Un message vous sera envoy\xe9 avec le code de r\xe9rservation suivant: SN892JI7P<br/><br/>Rendez vous dans le point relais le plus proche pour valider votre reservation avant le '+e.datePipe.transform(Object(h.a)(new Date,5),"EEEE, dd MMMM yyyy \xe0 HH:mm")+"</p>",icon:"success",showCancelButton:!1,confirmButtonText:"OK",allowEnterKey:!0,allowOutsideClick:!1,allowEscapeKey:!1}).then((function(t){if(t){e.loading=!1,e.status=!0;var n=(new s.a).countries.find((function(t){return t.code===e.payer.countryCode})).dial_code.replace("+","").concat(e.payer.telephone);e.currency.sendNotificationSMS(n,"Bonjour, votre r\xe9servation a bien \xe9t\xe9 enregistr\xe9e. Num\xe9ro de votre dossier: SN892JI7P. Rendez-vous au point de relai le plus proche.").pipe(e.scavenger.collect(),Object(g.a)(2)).subscribe((function(){return e.dialogRef.close(e.status)}))}}))}),1e3)):d.a.fire("Erreur","Ce numero de telephone ne represente pas un numero valide pour le "+this.countries.find((function(t){return t.code.equalIgnoreCase(e.payer.countryCode)})).name)}},{key:"checkPhoneNumber",value:function(){return Object(p.d)(this.payer.telephone,this.payer.countryCode)}}]),e}()).\u0275fac=function(e){return new(e||w)(a.Yb(f.g),a.Yb(f.a),a.Yb(v.f),a.Yb(m))},w.\u0275cmp=a.Sb({type:w,selectors:[["app-cash-payment"]],decls:33,vars:10,consts:[["mat-dialog-title","",1,"d-flex","flex-column","justify-content-start","mb-2"],[1,"d-flex","flex-row","justify-content-between"],["alt","logo BIP","height","80px","src","../../../../assets/images/logo/bip-logo.png","width","130px"],["alt","logo paiement en espece","height","80px","src","../../../../assets/images/icons/cash.jpg","width","80px"],[1,"payment-text"],["mat-dialog-content","",1,"ui","form","w-100","m-0","p-0",3,"ngClass"],[1,"ui","required","field"],["name","firstName","type","text",3,"ngModel","ngModelChange"],["name","lastName","type","text",3,"ngModel","ngModelChange"],[1,"field"],[1,"ui","compact","selection","dropdown",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"ui","labeled","input"],[1,"ui","basic","label"],["name","phone","type","text",1,"phone",3,"ngModel","ngModelChange"],["mat-dialog-actions","",1,"w-100","d-flex","flex-row","justify-content-around","align-items-center"],[1,"ui","gray","button",3,"click"],[1,"ui","orange","button",3,"click"],[3,"value"]],template:function(e,t){1&e&&(a.ec(0,"div",0),a.ec(1,"div",1),a.Zb(2,"img",2),a.Zb(3,"img",3),a.dc(),a.ec(4,"p",4),a.cd(5,"Paiement en point de relai"),a.dc(),a.dc(),a.ec(6,"div",5),a.ec(7,"div",6),a.ec(8,"label"),a.cd(9,"Pr\xe9nom"),a.dc(),a.ec(10,"input",7),a.qc("ngModelChange",(function(e){return t.payer.firstName=e})),a.dc(),a.dc(),a.ec(11,"div",6),a.ec(12,"label"),a.cd(13,"Nom"),a.dc(),a.ec(14,"input",8),a.qc("ngModelChange",(function(e){return t.payer.lastName=e})),a.dc(),a.dc(),a.ec(15,"div",9),a.ec(16,"label"),a.cd(17,"Pays"),a.dc(),a.ec(18,"select",10),a.qc("ngModelChange",(function(e){return t.payer.countryCode=e})),a.ad(19,C,2,2,"option",11),a.dc(),a.dc(),a.ec(20,"div",6),a.ec(21,"label"),a.cd(22,"T\xe9l\xe9phone"),a.dc(),a.ec(23,"div",12),a.ec(24,"div",13),a.Zb(25,"i"),a.cd(26),a.dc(),a.ec(27,"input",14),a.qc("ngModelChange",(function(e){return t.payer.telephone=e})),a.dc(),a.dc(),a.dc(),a.ec(28,"div",15),a.ec(29,"button",16),a.qc("click",(function(){return t.cancelRequest()})),a.cd(30,"Annuler"),a.dc(),a.ec(31,"button",17),a.qc("click",(function(){return t.validateRequest()})),a.cd(32,"Valider"),a.dc(),a.dc(),a.dc()),2&e&&(a.Kb(6),a.Cc("ngClass",t.loading?"loading":""),a.Kb(4),a.Cc("ngModel",t.payer.firstName),a.Kb(4),a.Cc("ngModel",t.payer.lastName),a.Kb(4),a.Cc("ngModel",t.payer.countryCode),a.Kb(1),a.Cc("ngForOf",t.countries),a.Kb(6),a.Nb("",t.payer.countryCode.toLowerCase()," flag"),a.Kb(1),a.ed("",t.getCountryDialingCode()," "),a.Kb(1),a.Cc("ngModel",t.payer.telephone))},directives:[f.h,f.e,v.p,b.c,b.n,b.q,b.w,v.q,f.c,b.r,b.y],styles:[""]}),w),x=n("FfJ/"),M=n("tyNb"),P=((j=function(){function e(t,n){_classCallCheck(this,e),this.cashMatDialog=t,this.router=n,this.loader=new a.q}return _createClass(e,[{key:"openCashPaymentDialog",value:function(){var e=this;this.cashMatDialog.open(O,{width:window.innerWidth>400?"400px":"360px",height:"max-content",hasBackdrop:!0,disableClose:!0,closeOnNavigation:!0,data:{payer:new x.a,price:this.paymentRequest.item_price}}).afterClosed().subscribe((function(){status&&e.router.navigate(["/"])}))}},{key:"pay",value:function(){var e=new c.a;this.loader.emit(!0),new PayExpresse({body:JSON.stringify(this.paymentRequest)}).withOption({requestTokenUrl:"".concat(e.mainHost).concat(e.payExpressPaymentRequest),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},prensentationMode:PayExpresse.OPEN_IN_POPUP,didReceiveNonSuccessResponse:function(e){if(e.message.toString().includes("[")){var t=e.message.toString().split("[");t[0]="";var n=JSON.parse(t.join("").slice(0,t.join("").length-1).replace("]",""));e.error=n.message,e.message=n.error}(new o.a).ErrorSwalWithNoReturn(e.error,e.message)}}).send()}}]),e}()).\u0275fac=function(e){return new(e||j)(a.Yb(f.b),a.Yb(M.c))},j.\u0275cmp=a.Sb({type:j,selectors:[["app-payment"]],inputs:{payer:"payer",paymentRequest:"paymentRequest"},outputs:{loader:"loader"},decls:5,vars:0,consts:[[1,"w-100","d-flex","flex-row","justify-content-around"],[1,"cursor-pointer",3,"click"],["alt","logo cash payment","src","../../../assets/images/icons/cash.jpg","width","100px"],["alt","Pay with PayExpress","src","../../../assets/images/icons/payexpress.jpg","width","100px"]],template:function(e,t){1&e&&(a.ec(0,"div",0),a.ec(1,"div",1),a.qc("click",(function(){return t.openCashPaymentDialog()})),a.Zb(2,"img",2),a.dc(),a.ec(3,"div",1),a.qc("click",(function(){return t.pay()})),a.Zb(4,"img",3),a.dc(),a.dc())},styles:[""]}),j)},zbbA:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("/h9T"),a=n("dLU1"),c=n("jIYg");function o(e,t){Object(c.a)(2,arguments);var n=Object(r.a)(t);return Object(a.a)(e,12*n)}}}]);